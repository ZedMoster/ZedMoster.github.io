<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>01.Window å®‰è£…å­ç³»ç»Ÿ Linux</title>
    <url>/2021/02/09/LinuxPrimer/01.%E5%AE%89%E8%A3%85%E5%AD%90%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<ul>
<li>è®¾ç½® -&gt; åº”ç”¨å’ŒåŠŸèƒ½ -&gt; <strong>å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½</strong></li>
</ul>
<p><img src=".//1.%E5%90%AF%E7%94%A8%E5%8A%9F%E8%83%BD.png" alt="start" title="å¯ç”¨å­ç³»ç»Ÿ"></p>
<ul>
<li><p>æ‰“å¼€å•†åº—ï¼Œæœç´  <strong>ubuntu</strong> å®‰è£…ç›¸åº”ç‰ˆæœ¬å³å¯</p>
</li>
<li><p>æ‰“å¼€ç³»ç»Ÿï¼Œç¬¬ä¸€æ¬¡æ‰“å¼€ç­‰å¾…å®‰è£…å®Œæˆå<strong>è®¾ç½®ç”¨æˆ·ååŠå¯†ç </strong></p>
</li>
</ul>
<a id="more"></a>

<hr>
<h2 id="å­ç³»ç»Ÿ-ubuntu-vim-å­—ä½“æ˜¾ç¤º"><a href="#å­ç³»ç»Ÿ-ubuntu-vim-å­—ä½“æ˜¾ç¤º" class="headerlink" title="å­ç³»ç»Ÿ ubuntu vim å­—ä½“æ˜¾ç¤º"></a>å­ç³»ç»Ÿ ubuntu vim å­—ä½“æ˜¾ç¤º</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€æ³¨å†Œåˆ—è¡¨ä½ç½®</span></span><br><span class="line"><span class="comment"># è®¡ç®—æœº\HKEY_CURRENT_USER\Console\</span></span><br><span class="line"><span class="comment"># é€‰æ‹© ubuntu ç³»ç»Ÿç›®å½• å³é”® æ·»åŠ  &quot;DWORDï¼ˆ32 ä½ï¼‰å€¼&quot;</span></span><br><span class="line"><span class="comment"># æ·»åŠ  CodePage</span></span><br><span class="line"><span class="comment"># åè¿›åˆ¶å€¼ 65001</span></span><br></pre></td></tr></table></figure>
<p><img src=".//2.%E6%98%BE%E7%A4%BA%E5%AD%97%E4%BD%93.png" alt="font" title="vim å­—ä½“æ˜¾ç¤ºè®¾ç½®"></p>
<h2 id="Windows-çš„-ubuntu-å­ç³»ç»Ÿ-VsCode-æ‰“å¼€"><a href="#Windows-çš„-ubuntu-å­ç³»ç»Ÿ-VsCode-æ‰“å¼€" class="headerlink" title="Windows çš„ ubuntu å­ç³»ç»Ÿ VsCode æ‰“å¼€"></a>Windows çš„ ubuntu å­ç³»ç»Ÿ VsCode æ‰“å¼€</h2><ul>
<li><p>1.Visual Studio Code å®‰è£…æ’ä»¶ â€œRemote - WSLâ€</p>
</li>
<li><p>2.æ‰“å¼€<strong>ubuntu</strong>å­ç³»ç»Ÿ,è¾“å…¥ <strong>code .</strong></p>
</li>
</ul>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>02.Ubuntu é•œåƒä½¿ç”¨å¸®åŠ©</title>
    <url>/2021/02/09/LinuxPrimer/02.%E6%9B%B4%E6%8D%A2%E5%AE%89%E8%A3%85%E6%BA%90/</url>
    <content><![CDATA[<p>Ubuntu çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶æ˜¯ <strong>/etc/apt/sources.list</strong></p>
<h2 id="è®¾ç½®æµ"><a href="#è®¾ç½®æµ" class="headerlink" title="è®¾ç½®æµ"></a>è®¾ç½®æµ</h2><ul>
<li><strong>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</strong></li>
<li><strong>cd /etc/apt/</strong></li>
<li><strong>sudo vim sources.list</strong></li>
</ul>
<p>å°†ç³»ç»Ÿè‡ªå¸¦çš„è¯¥æ–‡ä»¶åšä¸ªå¤‡ä»½ï¼Œå°†è¯¥æ–‡ä»¶æ›¿æ¢ä¸ºä¸‹é¢å†…å®¹ï¼Œå³å¯ä½¿ç”¨ TUNA çš„è½¯ä»¶æºé•œåƒã€‚</p>
<a id="more"></a>

<h2 id="è½¯ä»¶æºé•œåƒ-18-04-LTS"><a href="#è½¯ä»¶æºé•œåƒ-18-04-LTS" class="headerlink" title="è½¯ä»¶æºé•œåƒ:18.04 LTS"></a>è½¯ä»¶æºé•œåƒ:18.04 LTS</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span></span><br></pre></td></tr></table></figure>
<h2 id="è½¯ä»¶æºé•œåƒ-20-04-LTS"><a href="#è½¯ä»¶æºé•œåƒ-20-04-LTS" class="headerlink" title="è½¯ä»¶æºé•œåƒ:20.04 LTS"></a>è½¯ä»¶æºé•œåƒ:20.04 LTS</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>03.å®‰è£… pip å‘½ä»¤</title>
    <url>/2021/02/09/LinuxPrimer/03.%E5%AE%89%E8%A3%85pip%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="å®‰è£…-pip-æˆ–-pip3"><a href="#å®‰è£…-pip-æˆ–-pip3" class="headerlink" title="å®‰è£… pip æˆ– pip3"></a>å®‰è£… pip æˆ– pip3</h2><a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…python2 ç‰ˆæœ¬ pip</span></span><br><span class="line">sudo apt install python-pip</span><br><span class="line"><span class="comment"># å®‰è£…python3 ç‰ˆæœ¬ pip3</span></span><br><span class="line">sudo apt install python3-pip</span><br></pre></td></tr></table></figure>
<h2 id="ä»…ä½¿ç”¨-python3-æ—¶ä½¿ç”¨-pip-ä»£æ›¿-pip3"><a href="#ä»…ä½¿ç”¨-python3-æ—¶ä½¿ç”¨-pip-ä»£æ›¿-pip3" class="headerlink" title="ä»…ä½¿ç”¨ python3 æ—¶ä½¿ç”¨ pip ä»£æ›¿ pip3"></a>ä»…ä½¿ç”¨ python3 æ—¶ä½¿ç”¨ pip ä»£æ›¿ pip3</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="comment"># æ·»åŠ æ›¿æ¢çš„å†…å®¹</span></span><br><span class="line">alias pip=<span class="string">&quot;pip3&quot;</span></span><br><span class="line">alias python=<span class="string">&quot;python3&quot;</span></span><br><span class="line"><span class="comment"># ä¿å­˜åæ›´æ–°é…ç½®</span></span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ¢-pip-æº"><a href="#æ›´æ¢-pip-æº" class="headerlink" title="æ›´æ¢ pip æº"></a>æ›´æ¢ pip æº</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">mkdir ~/.config/pip/</span><br><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶ç›®å½•</span></span><br><span class="line">cd ~/.config/pip/</span><br><span class="line"><span class="comment"># åˆ›å»ºå¹¶æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">vim pip.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶å†…å®¹å¹¶ä¿å­˜</span></span><br><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple/</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å®‰è£…å¸è½½è½¯ä»¶"><a href="#å®‰è£…å¸è½½è½¯ä»¶" class="headerlink" title="å®‰è£…å¸è½½è½¯ä»¶"></a>å®‰è£…å¸è½½è½¯ä»¶</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">sudo apt install ipython3</span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">sudo apt remove ipython3</span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…-scrapy-ååˆ›å»ºè½¯è¿æ¥"><a href="#å®‰è£…-scrapy-ååˆ›å»ºè½¯è¿æ¥" class="headerlink" title="å®‰è£… scrapy ååˆ›å»ºè½¯è¿æ¥"></a>å®‰è£… scrapy ååˆ›å»ºè½¯è¿æ¥</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¡®å®šå®‰è£…ä½ç½®</span></span><br><span class="line">/usr/local/python3/<span class="built_in">bin</span>/scrapy</span><br><span class="line"><span class="comment"># å»ºç«‹è½¯é“¾æ¥</span></span><br><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/scrapy /usr/<span class="built_in">bin</span>/scrapy</span><br><span class="line"><span class="comment"># åˆ é™¤è½¯é“¾æ¥</span></span><br><span class="line">rm -rf scrapy</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>04.vim è‡ªåŠ¨è¡¥é½ python</title>
    <url>/2021/02/09/LinuxPrimer/04.vim%E8%87%AA%E5%8A%A8%E8%A1%A5%E9%BD%90python/</url>
    <content><![CDATA[<h2 id="Pydiction"><a href="#Pydiction" class="headerlink" title="Pydiction"></a>Pydiction</h2><p><strong>Pydiction</strong> å¯ä»¥ä½¿æˆ‘ä»¬ä½¿ç”¨ Tab é”®è‡ªåŠ¨è¡¥å…¨ Python ä»£ç åœ¨ Vimï¼Œæ˜¯ä¸€æ¬¾éå¸¸ä¸é”™çš„æ’ä»¶ã€‚<br>ä¸éœ€è¦å®‰è£…ï¼Œæ‰€æœ‰æ²¡æœ‰ä»»ä½•ä¾èµ–åŒ…é—®é¢˜ã€‚</p>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line">mkdir -p ~/.vim/bundle</span><br><span class="line"><span class="comment"># æ‰“å¼€ç›®å½•</span></span><br><span class="line">cd ~/.vim/bundle</span><br><span class="line"><span class="comment"># ä¸‹è½½ Pydiction</span></span><br><span class="line">git clone https://github.com/rkulla/pydiction.git</span><br><span class="line"><span class="comment"># å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line">cp -r ~/.vim/bundle/pydiction/after/ ~/.vim</span><br><span class="line"><span class="comment"># æ–°å»º.vimrcæ–‡ä»¶</span></span><br><span class="line">vim ~/.vimrc</span><br><span class="line"><span class="comment"># åœ¨.vimrcæ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</span></span><br><span class="line"></span><br><span class="line">filetype plugin on</span><br><span class="line">autocmd FileType python <span class="built_in">set</span> omnifunc=pythoncomplete<span class="comment">#Complete</span></span><br><span class="line">let g:pydiction_location=<span class="string">&#x27;~/.vim/bundle/pydiction/complete-dict&#x27;</span></span><br><span class="line">let g:pydiction_menu_height = <span class="number">4</span></span><br><span class="line"><span class="built_in">set</span> filetype=python</span><br><span class="line">au BufNewFile,BufRead *.py,*.pyw setf python</span><br><span class="line"><span class="built_in">set</span> autoindent</span><br><span class="line"><span class="built_in">set</span> smartindent</span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="built_in">set</span> expandtab</span><br><span class="line"><span class="built_in">set</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="built_in">set</span> shiftwidth=<span class="number">4</span></span><br><span class="line"><span class="built_in">set</span> softtabstop=<span class="number">4</span></span><br><span class="line"><span class="built_in">set</span> textwidth=<span class="number">79</span></span><br><span class="line"><span class="built_in">set</span> encoding=utf-<span class="number">8</span></span><br><span class="line"><span class="built_in">set</span> fileformat=unix</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯å ä½¿ç”¨Tabé”®è‡ªåŠ¨è¡¥å…¨pythonä»£ç äº†</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>05.git ä½¿ç”¨</title>
    <url>/2021/02/09/LinuxPrimer/05.git%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="git-åŸºæœ¬å‘½ä»¤"><a href="#git-åŸºæœ¬å‘½ä»¤" class="headerlink" title="git åŸºæœ¬å‘½ä»¤"></a>git åŸºæœ¬å‘½ä»¤</h2><p>åˆå§‹åŒ–å‘½ä»¤ã€æŸ¥çœ‹çŠ¶æ€ã€ç®¡ç†æ–‡ä»¶ã€é…ç½®ç­‰</p>
<a id="more"></a>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥éœ€è¦ç®¡ç†çš„æ–‡ä»¶å¤¹ -- åˆå§‹åŒ–å‘½ä»¤</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶çš„çŠ¶æ€</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®¡ç†æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line">git add æ–‡ä»¶å</span><br><span class="line"><span class="comment"># ç®¡ç†ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ªäººä¿¡æ¯é…ç½®ï¼šç”¨æˆ·åã€é‚®ç®± -- ä»…é…ç½®ä¸€æ¬¡å³å¯</span></span><br><span class="line">git config --global user.email <span class="string">&quot;UserName@gmail.com&quot;</span></span><br><span class="line">git config --global user.name <span class="string">&quot;UserName&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä»£ç†</span></span><br><span class="line">git config --global http.proxy http://127.0.0.1:10809</span><br><span class="line">git config --global https.proxy http://127.0.0.1:10809</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç‰ˆæœ¬</span></span><br><span class="line">git commit -m <span class="string">&quot;æè¿°ç‰ˆæœ¬ä¿¡æ¯&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬è®°å½•</span></span><br><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<h2 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç‰ˆæœ¬å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬</span></span><br><span class="line">git reset --hard ç‰ˆæœ¬å·</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›æ»šåˆ°ä¹‹åçš„ç‰ˆæœ¬</span></span><br><span class="line">git reflog</span><br><span class="line">git reset --hard ç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰ä¸€é”®-add-commit-push-æ“ä½œ"><a href="#è‡ªå®šä¹‰ä¸€é”®-add-commit-push-æ“ä½œ" class="headerlink" title="è‡ªå®šä¹‰ä¸€é”® add . / commit / push æ“ä½œ"></a>è‡ªå®šä¹‰ä¸€é”® add . / commit / push æ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># windows</span></span><br><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶å¤¹ C:\Program Files\Git\etc</span></span><br><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶ .gitconfig</span></span><br><span class="line"><span class="comment"># æ·»åŠ ä¸‹æ–¹å†…å®¹</span></span><br><span class="line">[<span class="built_in">alias</span>]</span><br><span class="line">    ad = <span class="string">&quot;!f() &#123; git add -A &amp;&amp; git commit -m \&quot;<span class="variable">$@</span>\&quot; &amp;&amp; git push; &#125;; f&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ³•ï¼š git ad &quot;commit message&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>Shell</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>1.1 Dynamo&#39;s Pythonç¼–è¾‘å™¨</title>
    <url>/2021/02/08/PythonScriptPrimer/1.1%20Dynamo&#39;s%20Python%E7%BC%96%E8%BE%91%E5%99%A8/</url>
    <content><![CDATA[<h2 id="Dynamo-çš„-Python-è„šæœ¬ç¼–è¾‘å™¨"><a href="#Dynamo-çš„-Python-è„šæœ¬ç¼–è¾‘å™¨" class="headerlink" title="Dynamo çš„ Python è„šæœ¬ç¼–è¾‘å™¨"></a>Dynamo çš„ Python è„šæœ¬ç¼–è¾‘å™¨</h2><p><em>Python</em> è„šæœ¬èŠ‚ç‚¹éš <em>Dynamo</em> ä¸€èµ·å®‰è£…ï¼Œå¹¶ä¸”åœ¨è®¸å¤šæ–¹é¢ï¼Œå®ƒä¸ä»»ä½•å…¶ä»–èŠ‚ç‚¹ä¸€æ ·ï¼šå¯ä»¥æ”¾ç½®åœ¨å·¥ä½œç©ºé—´ä¸­ï¼Œé‡å‘½åå¹¶å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„è¾“å…¥ã€‚</p>
<a id="more"></a>

<p>ä½†æ˜¯ï¼Œä¸å…¶ä»–èŠ‚ç‚¹ä¸åŒï¼Œå¦‚æœå³é”®å•å‡»å¹¶é€‰æ‹© <strong>Edit..</strong> åˆ™ä¼šå‡ºç°ä¸€ä¸ªè„šæœ¬ç¼–è¾‘çª—å£(åŒå‡»èŠ‚ç‚¹)ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src=".//3.1.edit.png" alt="é»˜è®¤æƒ…å†µä¸‹Dynamoå°†ä½¿ç”¨ä¸Šé¢çš„ä»£ç å¡«å……ç¼–è¾‘å™¨"></p>
<p>åœ¨æ­¤çª—å£ä¸­ï¼Œæ‚¨å¯ä»¥ç¼–å†™ <strong>IronPython</strong> è„šæœ¬ï¼Œè¿™äº›è„šæœ¬å°†ä½œä¸º Dynamo å®šä¹‰çš„ä¸€éƒ¨åˆ†ç›´æ¥æ‰§è¡Œã€‚è¦ä¿å­˜è„šæœ¬ï¼Œè¯·å•å‡» <strong>ä¿å­˜æ›´æ”¹</strong> æŒ‰é’®ï¼Œç„¶åä¿å­˜å…¶ä¸­çš„ Dynamo å®šä¹‰ã€‚å¦åˆ™ï¼Œè¯·å•å‡»â€œå–æ¶ˆâ€æŒ‰é’®ä»¥æ”¾å¼ƒæ‰€åšçš„ä»»ä½•æ›´æ”¹ã€‚</p>
<h2 id="å¦‚ä½•ç¼–å†™ç¨‹åº"><a href="#å¦‚ä½•ç¼–å†™ç¨‹åº" class="headerlink" title="å¦‚ä½•ç¼–å†™ç¨‹åº"></a>å¦‚ä½•ç¼–å†™ç¨‹åº</h2><p>ä½¿ç”¨ <em>Dynamo</em> ç¼–å†™ <em>Python</em> ä»£ç ï¼åé¢ä¼šå­¦ä¹ è®¾ç½®æ ·æ¿ä»£ç ï¼Œå¼•ç”¨ <strong>Revit Api</strong>ã€‚</p>
<p><a href="https://primer.dynamobim.org/">dynamo æ‰‹å†Œ</a></p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>1.2 æ ·æ¿ä»£ç è®¾ç½®</title>
    <url>/2021/02/08/PythonScriptPrimer/1.2%20%E6%A0%B7%E6%9D%BF%E4%BB%A3%E7%A0%81%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="æ ·æ¿ä»£ç è®¾ç½®"><a href="#æ ·æ¿ä»£ç è®¾ç½®" class="headerlink" title="æ ·æ¿ä»£ç è®¾ç½®"></a>æ ·æ¿ä»£ç è®¾ç½®</h2><p>å¤åˆ¶ä»£ç æ–‡ä»¶åˆ°æœ¬åœ°ä¿å­˜ä¸º <strong>RevitApi.py</strong></p>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> clr</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&#x27;C:\Program Files (x86)\IronPython 2.7\Lib&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> System</span><br><span class="line"><span class="keyword">from</span> System <span class="keyword">import</span> Array</span><br><span class="line"><span class="keyword">from</span> System.Collections.Generic <span class="keyword">import</span> *</span><br><span class="line">clr.AddReference(<span class="string">&#x27;ProtoGeometry&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> Autodesk.DesignScript.Geometry <span class="keyword">import</span> *</span><br><span class="line">clr.AddReference(<span class="string">&quot;RevitNodes&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> Revit</span><br><span class="line">clr.ImportExtensions(Revit.Elements)</span><br><span class="line">clr.ImportExtensions(Revit.GeometryConversion)</span><br><span class="line">clr.AddReference(<span class="string">&quot;RevitServices&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> RevitServices</span><br><span class="line"><span class="keyword">from</span> RevitServices.Persistence <span class="keyword">import</span> DocumentManager</span><br><span class="line"><span class="keyword">from</span> RevitServices.Transactions <span class="keyword">import</span> TransactionManager</span><br><span class="line"></span><br><span class="line">clr.AddReference(<span class="string">&quot;RevitAPI&quot;</span>)</span><br><span class="line">clr.AddReference(<span class="string">&quot;RevitAPIUI&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Autodesk</span><br><span class="line"><span class="keyword">from</span> Autodesk.Revit.DB <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> Autodesk.Revit.UI <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">doc = DocumentManager.Instance.CurrentDBDocument</span><br><span class="line">uiapp = DocumentManager.Instance.CurrentUIApplication</span><br><span class="line">app = uiapp.Application</span><br><span class="line">uidoc = uiapp.ActiveUIDocument</span><br><span class="line"></span><br><span class="line">TransactionManager.Instance.EnsureInTransaction(doc) <span class="comment"># äº‹åŠ¡å¼€å§‹</span></span><br><span class="line"><span class="comment">####### é€»è¾‘ä»£ç  ########</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TransactionManager.Instance.TransactionTaskDone()    <span class="comment"># äº‹åŠ¡ç»“æŸ</span></span><br><span class="line">OUT = doc</span><br></pre></td></tr></table></figure>
<h2 id="Python-Script-æ ·æ¿æ–‡ä»¶"><a href="#Python-Script-æ ·æ¿æ–‡ä»¶" class="headerlink" title="Python Script æ ·æ¿æ–‡ä»¶"></a>Python Script æ ·æ¿æ–‡ä»¶</h2><p>Dynamo 2.0 å¼€å§‹,å¼•å…¥ Python è„šæœ¬æ¨¡æ¿ã€‚é»˜è®¤åº”ç”¨å˜é‡ä¼šè‡ªåŠ¨æ·»åŠ åˆ° <em>Python Script</em> èŠ‚ç‚¹</p>
<hr>
<ul>
<li>å¤åˆ¶æ–‡ä»¶<strong>RevitBoilerplate.py</strong>åˆ°ä½ç½®ä½äº Dynamo å®‰è£…çš„ <em>APPDATA</em> ä½ç½®ã€‚</li>
</ul>
<p>è·¯å¾„ï¼š<em>%appdata%\Dynamo\Dynamo Revit\{version}\</em></p>
<p><img src=".//3.2.Setting.png" alt="Setting"></p>
<ul>
<li>ä¿®æ”¹æ–‡ä»¶<strong>DynamoSettings.xml</strong>ä¸­çš„ PythonTemplateFilePath å†…å®¹</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;PythonTemplateFilePath&gt;</span><br><span class="line">  C:\Users\&#123;USERNAME&#125;\AppData\Roaming\Dynamo\Dynamo Revit\&#123;version&#125;\RevitBoilerplate.py</span><br><span class="line">&lt;/PythonTemplateFilePath&gt;</span><br></pre></td></tr></table></figure>
<p>å®Œæˆä¸Šé¢çš„è®¾ç½®ä¹‹åã€‚å°±å¯ä»¥ä½¿ç”¨ Dynamo æ„‰å¿«ç¼–å†™ python è„šæœ¬æ“æ§ Revit è½¯ä»¶ï¼</p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>1.3 åŸºæœ¬ï¼šè¾“å…¥å’Œè¾“å‡º</title>
    <url>/2021/02/08/PythonScriptPrimer/1.3%20%E5%9F%BA%E6%9C%AC%EF%BC%9A%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA/</url>
    <content><![CDATA[<h2 id="è¾“å…¥å’Œè¾“å‡º"><a href="#è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="è¾“å…¥å’Œè¾“å‡º"></a>è¾“å…¥å’Œè¾“å‡º</h2><p><strong>IN</strong> å’Œ <strong>OUT</strong> æ˜¯ Dynamo çš„ Python èŠ‚ç‚¹ä¸­çš„é‡è¦å…³é”®å­—ã€‚<strong>IN</strong> å…³é”®å­—å‘Šè¯‰èŠ‚ç‚¹å¼•ç”¨é€šè¿‡å…¶è¾“å…¥å‘é€åˆ°èŠ‚ç‚¹çš„ä»»ä½•æ•°æ®ã€‚</p>
<ul>
<li>æ³¨æ„ï¼šåé¢æ‰€æœ‰çš„ç¨‹åºä»£ç å‡è¿è¡Œåœ¨æ¨¡æ¿æ–‡ä»¶ä»£ç å—å†…<a id="more"></a>

</li>
</ul>
<p>é€šè¿‡å®ƒä»¬çš„ç´¢å¼•å¯ä»¥è®¿é—®å„ç§è¾“å…¥ï¼Œä¾‹å¦‚ä¸‹é¢çš„ list_of_numbersï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input_list_of_numbers = IN[<span class="number">0</span>] <span class="comment"># è·å–å¤–éƒ¨èŠ‚ç‚¹è¾“å…¥</span></span><br><span class="line">output_list_of_numbers = []   <span class="comment"># åˆ›å»ºç©ºåˆ—è¡¨ä½œä¸ºè¾“å‡ºçš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> input_list_of_numbers:</span><br><span class="line">    new_number = number + <span class="number">1</span></span><br><span class="line">    output_list_of_numbers.append(new_number)</span><br><span class="line"></span><br><span class="line">OUT = output_list_of_numbers <span class="comment"># è¾“å‡ºæ–°çš„åˆ—è¡¨å†…å®¹ï¼ˆä¼ å…¥çš„å€¼æ¯ä¸ªæ•°å­—å‡è¿›è¡Œ +1 æ“ä½œï¼‰</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ€åˆä¸ºè¾“å‡ºåˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ã€‚æˆ‘ä»¬éå†è¾“å…¥åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ•°å­—ï¼Œå¹¶å°†å…¶è¿›è¡Œ +1 æ“ä½œåæ·»åŠ åˆ°æˆ‘ä»¬åˆ›å»ºçš„è¾“å‡ºåˆ—è¡¨ä¸­ã€‚æœ€åï¼Œé€šè¿‡ <strong>OUT</strong> å…³é”®å­—è¾“å‡ºåˆ—è¡¨ã€‚</p>
<p>å®é™…ä¸Šï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<p><img src=".//3.3.Code.png" alt="3.3æˆªå›¾ä»£ç "></p>
<h2 id="è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹"><a href="#è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹" class="headerlink" title="è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹"></a>è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹</h2><p>Dynamo èŠ‚ç‚¹å¯ä»¥å°†ä»»ä½•ç§ç±»çš„æ•°æ®ä½œä¸ºè¾“å…¥ï¼Œå¹¶å¯ä»¥è¾“å‡ºä»»ä½•ç§ç±»çš„æ•°æ®ä½œä¸ºè¾“å‡ºã€‚</p>
<p>å®ƒèƒ½å¤Ÿå°†å…ƒç´ ï¼ˆä¾‹å¦‚ Revit å…ƒç´ ï¼‰ï¼ŒæŠ½è±¡æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼ŒDynamo å‡ ä½•å›¾å½¢ä»¥åŠå…¶ä»–æ‰€æœ‰å†…å®¹ä½œä¸ºè¾“å…¥ã€‚</p>
<p>ä½†æ˜¯ï¼Œå°† Revit å…ƒç´ è¾“å…¥åˆ° Python èŠ‚ç‚¹æ—¶æœ‰ä¸€ä¸ªè­¦å‘Šã€‚</p>
<p>Revit å…ƒç´ éœ€è¦è¿›è¡Œè½¬æ¢ç±»å‹åï¼Œæ‰èƒ½é€šè¿‡ API è¿›è¡Œè®¿é—®ã€‚</p>
<hr>
<p><img src=".//3.3.Totype.jpg" alt="3.3ç±»å‹è½¬æ¢"></p>
<p>äº†è§£ <strong>Dynamo Revit</strong> æ•°æ®ç±»å‹è½¬æ¢</p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.1 Revit APIç®€ä»‹</title>
    <url>/2021/02/09/PythonScriptPrimer/2.1%20Revit%20API%E7%AE%80%E4%BB%8B/</url>
    <content><![CDATA[<h2 id="Revit-API-ç®€ä»‹"><a href="#Revit-API-ç®€ä»‹" class="headerlink" title="Revit API ç®€ä»‹"></a>Revit API ç®€ä»‹</h2><p>Revit è‡ª 2000 å¹´ä»£åˆä»¥æ¥å°±å…·æœ‰å¯è®¿é—®çš„ APIï¼Œå¯ç”¨äºé©±åŠ¨è¯¥è½¯ä»¶çš„å‡ ä¹æ¯ä¸ªæ–¹é¢ã€‚ç”±äº Revit åº”ç”¨ç¨‹åºéå¸¸å¤æ‚ï¼Œå¹¶ä¸”æ»¡è¶³å¤šä¸“ä¸šåŠŸèƒ½éœ€æ±‚ï¼ˆå»ºç­‘ç»“æ„ï¼ŒMEP ç­‰ï¼‰ï¼Œå› æ­¤å®ƒçš„ API éå¸¸å¤§ä¸”éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½ç›´è§‚åœ°ç†è§£ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚</p>
<a id="more"></a>

<p>æˆ‘ç»å¸¸å‘ç°æœ€å®¹æ˜“æƒ³åˆ° Revit ä¸»è¦æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºæ—¶ä¼šä¸æ–­å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚æ•°æ®åº“å­˜å‚¨æˆ‘ä»¬çš„å†…å®¹ï¼ˆå…¶å…ƒç´  IDï¼Œç±»åˆ«ï¼Œä½ç½®ç­‰ï¼‰ã€‚åœ¨æ­¤ä¹‹ä¸Šæ˜¯ GUIï¼Œå®ƒè¡¨ç¤º 3D ç©ºé—´ä¸­å…ƒç´ çš„å‡ ä½•å½¢çŠ¶/ä½ç½®ï¼Œå¹¶è®©æˆ‘ä»¬ä¸å…ƒç´ è¿›è¡Œäº¤äº’ã€‚</p>
<p>æœ€åï¼Œè¿˜æœ‰ä¸€ç‚¹ç½‘ç»œé­”æœ¯å¯ä»¥ä½¿æˆ‘ä»¬è·¨å±€åŸŸç½‘/ Revit Server / BIM360 è®¾ç½®å·¥ä½œå…±äº«ã€‚ ä»¥è¿™ç§æ–¹å¼æ€è€ƒ Revit ä¸å¤§å¤šæ•°ç”¨æˆ·ä½“éªŒè¯¥è½¯ä»¶çš„æ–¹å¼å®Œå…¨ä¸åŒã€‚å®é™…ä¸Šï¼Œå½“æˆ‘ä»¬é’ˆå¯¹ Revit çš„ API ç¼–å†™è„šæœ¬æ—¶ï¼Œæˆ‘ä»¬åªæ˜¯å¯¹æ•°æ®åº“è¿›è¡Œäº†ä¸€ç³»åˆ—è°ƒç”¨ï¼Œå—è¯¥ API è§„åˆ™çš„çº¦æŸã€‚</p>
<h2 id="ç‰ˆæœ¬å’Œå†å²"><a href="#ç‰ˆæœ¬å’Œå†å²" class="headerlink" title="ç‰ˆæœ¬å’Œå†å²"></a>ç‰ˆæœ¬å’Œå†å²</h2><p>å¯¹äº Revit çš„æ¯ä¸ªå‘è¡Œç‰ˆå’Œå­å‘è¡Œç‰ˆï¼ŒAutodesk Revit å›¢é˜Ÿéƒ½ä¼šå¯¹å…¶ API è¿›è¡Œè¾ƒå°çš„æ›´æ–°æˆ–æ·»åŠ ã€‚è¿™äº›æ›´æ”¹ä¸»è¦ä¸è½¯ä»¶æœ¬èº«çš„åŠŸèƒ½æ›´æ”¹æœ‰å…³ã€‚</p>
<h2 id="Revit-SDK-amp-API-æ–‡æ¡£"><a href="#Revit-SDK-amp-API-æ–‡æ¡£" class="headerlink" title="Revit SDK &amp; API æ–‡æ¡£"></a>Revit SDK &amp; API æ–‡æ¡£</h2><p>è½¯ä»¶å¼€å‘å¥—ä»¶ï¼ˆSDKï¼‰æ˜¯è½¯ä»¶ä¾›åº”å•†å‘å¼€å‘äººå‘˜åˆ†å‘æœ‰å…³å…¶ API çš„ä¿¡æ¯çš„ä¸€ç§å¸¸ç”¨æ–¹æ³•ã€‚å¯ä»¥åœ¨æ‰¾åˆ°å®˜æ–¹çš„ Revit SDK ã€‚</p>
<p><a href="https://knowledge.autodesk.com/support/revit-products/learn-explore/caas/CloudHelp/cloudhelp/2019/ENU/Revit-Customize/files/GUID-D7E8694D-7DB3-41CA-A0F3-AF64DC2DA015-htm.html"><strong>å®˜æ–¹ SDK ç‚¹å‡»ä¸‹è½½</strong></a></p>
<p>æ‰€æœ‰ API éƒ½éœ€è¦æŠ€æœ¯æ–‡æ¡£ï¼Œå› æ­¤ç¨‹åºå‘˜å¯ä»¥é€‰æ‹©å®ƒä»¬å¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨ä»£ç æ¥é©±åŠ¨åº”ç”¨ç¨‹åºã€‚Revit SDK åŒ…å«.chm æ–‡ä»¶ä¸­çš„å®˜æ–¹ API æ–‡æ¡£ä»¥åŠä»£ç ç¤ºä¾‹ï¼ˆç”¨ Visual Basic å’Œ Cï¼ƒç¼–å†™ï¼‰ã€‚</p>
<p>ä½†æ˜¯ï¼Œæœ¬æŒ‡å—å»ºè®®é˜…è¯» <strong>APIDocs.co</strong> ç½‘ç«™ä¸Šçš„ Revit API ï¼Œè¿™æ¯”æ‰“å¼€ <strong>.chm</strong> æ–‡ä»¶æ–¹ä¾¿è®¸å¤šã€‚</p>
<p><a href="https://apidocs.co/"><strong>APIDocs.co</strong></a></p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.10 æç¤ºç”¨æˆ·ç•Œé¢é€‰æ‹©</title>
    <url>/2021/02/09/PythonScriptPrimer/2.10%20%E6%8F%90%E7%A4%BA%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E9%80%89%E6%8B%A9/</url>
    <content><![CDATA[<h2 id="ç”¨æˆ·é€‰æ‹©å·¥ä½œæµç¨‹"><a href="#ç”¨æˆ·é€‰æ‹©å·¥ä½œæµç¨‹" class="headerlink" title="ç”¨æˆ·é€‰æ‹©å·¥ä½œæµç¨‹"></a>ç”¨æˆ·é€‰æ‹©å·¥ä½œæµç¨‹</h2><p>æœ‰æ—¶æˆ‘ä»¬å¯èƒ½ä¼šæ„å»ºä¸€ä¸ªé€šç”¨å·¥å…·ï¼Œè¦æ±‚ç”¨æˆ·é€‰æ‹©æ–‡æ¡£ä¸­çš„ Revit å…ƒç´ ï¼ˆä¾‹å¦‚ï¼Œå…ƒç´ é‡æ–°ç¼–å·å·¥å…·ï¼‰ã€‚è¿™å°†éœ€è¦æ— é™æ•°é‡çš„å¯è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œä»¥ä½¿ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨é€»è¾‘é€‰æ‹©ä»–ä»¬é€‰æ‹©çš„å…ƒç´ ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æç¤ºç”¨æˆ·é€‰æ‹©æŸäº›å†…å®¹æ¥è·³è¿‡æ•´ä¸ªé—®é¢˜ã€‚</p>
<h2 id="ISelectionFilter-æ¥å£"><a href="#ISelectionFilter-æ¥å£" class="headerlink" title="ISelectionFilter æ¥å£"></a>ISelectionFilter æ¥å£</h2><p><strong>ISelectionFilter</strong> å¯ä»¥é™åˆ¶ç”¨æˆ·å¯ä»¥é€‰æ‹©çš„å…ƒç´ ç§ç±»ã€‚åªéœ€è¦åˆ›å»ºä¸€ä¸ªå®ç°è¯¥æ¥å£çš„æ–°ç±»ã€‚</p>
<p>ç„¶åï¼Œå°†æ­¤ç±»çš„å®ä¾‹ä½œä¸ºå‚æ•°æä¾›ç»™ <strong>PickElementsByRectangle()</strong> æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæç¤ºç”¨æˆ·é€‰æ‹© Walls æ‰€éœ€çš„ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŠ è½½è¿‡æ»¤é€‰æ‹©çš„æ¥å£ ISelectionFilter</span></span><br><span class="line"><span class="keyword">from</span> Autodesk.Revit.UI.Selection <span class="keyword">import</span> ISelectionFilter</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰é€‰æ‹©è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySelectionFilter</span>(<span class="params">ISelectionFilter</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">AllowElement</span>(<span class="params">self, element</span>):</span></span><br><span class="line">        <span class="keyword">return</span> element.Category.Name == <span class="string">&quot;å¢™&quot;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">AllowReference</span>(<span class="params">self, element</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">selection_filter = MySelectionFilter()                            <span class="comment"># ä»…é€‰æ‹©å¢™</span></span><br><span class="line">walls = uidoc.Selection.PickElementsByRectangle(selection_filter) <span class="comment"># è¿”å›æ¡†é€‰çš„å¢™ä½“</span></span><br><span class="line">OUT = walls</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.11 Units å•ä½å¤„ç†</title>
    <url>/2021/02/09/PythonScriptPrimer/2.11%20Units%E5%8D%95%E4%BD%8D%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h2 id="Revit-é•¿åº¦"><a href="#Revit-é•¿åº¦" class="headerlink" title="Revit é•¿åº¦"></a>Revit é•¿åº¦</h2><p>Revit é•¿åº¦å†…éƒ¨å•ä½ï¼š<strong>è‹±å°º</strong></p>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">detail_line = UnwrapElement(IN[<span class="number">0</span>])</span><br><span class="line">decimal_feet_length = detail_line.GeometryCurve.Length</span><br><span class="line">OUT = decimal_feet_length  <span class="comment"># å•ä½ï¼šè‹±å°º</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç è¿”å›çš„æ•°æ®å•ä½å¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ¯«ç±³å•ä½ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®è¿›è¡Œå•ä½è½¬æ¢ã€‚</p>
<h3 id="å•ä½è½¬æ¢ï¼ˆæ¯«ç±³ï¼‰"><a href="#å•ä½è½¬æ¢ï¼ˆæ¯«ç±³ï¼‰" class="headerlink" title="å•ä½è½¬æ¢ï¼ˆæ¯«ç±³ï¼‰"></a>å•ä½è½¬æ¢ï¼ˆæ¯«ç±³ï¼‰</h3><p>ä½¿ç”¨ Revit çš„ <strong>UnitUtils</strong> ç±»ï¼Œä¸”å‚æ•°åªèƒ½ä» Revit çš„ <strong>DisplayUnitType</strong> æšä¸¾ä¸­é€‰æ‹©å€¼ç±»å‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">detail_line = UnwrapElement(IN[<span class="number">0</span>])</span><br><span class="line">decimal_feet_length = detail_line.GeometryCurve.Length</span><br><span class="line">metric_length = UnitUtils.Convert(decimal_feet_length, DisplayUnitType.DUT_DECIMAL_FEET, DisplayUnitType.DUT_MILLIMETERS)  <span class="comment"># å°†è‹±å°ºè½¬æ¢ä¸ºæ¯«ç±³</span></span><br><span class="line">OUT = metric_length  <span class="comment"># å•ä½ï¼šæ¯«ç±³</span></span><br></pre></td></tr></table></figure>
<h2 id="è§’åº¦"><a href="#è§’åº¦" class="headerlink" title="è§’åº¦"></a>è§’åº¦</h2><h3 id="å•ä½è½¬æ¢ï¼ˆå¼§åº¦ï¼‰"><a href="#å•ä½è½¬æ¢ï¼ˆå¼§åº¦ï¼‰" class="headerlink" title="å•ä½è½¬æ¢ï¼ˆå¼§åº¦ï¼‰"></a>å•ä½è½¬æ¢ï¼ˆå¼§åº¦ï¼‰</h3><p>Revit è§’åº¦å†…éƒ¨å•ä½ï¼š<strong>å¼§åº¦</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">angle = <span class="number">90.0</span>  <span class="comment"># è§’åº¦å€¼</span></span><br><span class="line">radians_equivalent = UnitUtils.Convert(angle, DisplayUnitType.DUT_DECIMAL_DEGREES, DisplayUnitType.DUT_RADIANS)  <span class="comment"># å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</span></span><br><span class="line">OUT = radians_equivalent  <span class="comment"># å•ä½ï¼šå¼§åº¦</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.12 å†…ç½®ç±»åˆ«</title>
    <url>/2021/02/09/PythonScriptPrimer/2.12%20%E5%86%85%E7%BD%AE%E7%B1%BB%E5%88%AB/</url>
    <content><![CDATA[<h2 id="BuiltInCategory"><a href="#BuiltInCategory" class="headerlink" title="BuiltInCategory"></a>BuiltInCategory</h2><p>Revit ç”¨æˆ·ç•Œé¢å‘ç”¨æˆ·æ˜¾ç¤ºäº†è®¸å¤šç±»åˆ«ï¼Œä¾‹å¦‚é—¨ï¼Œæ¥¼æ¿å’Œå¸¸è§„æ¨¡å‹ç­‰ã€‚Revit åœ¨å†…éƒ¨ä½¿ç”¨æ›´è¯¦ç»†çš„ç±»åˆ«åˆ—è¡¨ï¼Œç§°ä¸ºå†…ç½®ç±»åˆ«ã€‚å†…ç½®ç±»åˆ«çš„å®Œæ•´åˆ—è¡¨å¯ä»¥åœ¨ <strong>BuiltInCategory</strong> æšä¸¾ä¸­æ‰¾åˆ°-è¿™äº›æ˜¯å›ºå®šç¼–ç ï¼Œä¸èƒ½åˆ›å»ºä¿®æ”¹ã€‚</p>
<a id="more"></a>

<h2 id="æ£€ç´¢ç±»åˆ«å…ƒç´ "><a href="#æ£€ç´¢ç±»åˆ«å…ƒç´ " class="headerlink" title="æ£€ç´¢ç±»åˆ«å…ƒç´ "></a>æ£€ç´¢ç±»åˆ«å…ƒç´ </h2><p>ç”±äºè¯¥åˆ—è¡¨æ¶µç›–äº†è¿‘ 1000 ä¸ªç±»åˆ«ï¼Œå› æ­¤å¯ä»¥å¸®åŠ©æˆ‘é—¨æ›´ç²¾ç¡®åœ°å®šä½ Revit å…ƒç´ ã€‚å†…ç½®ç±»åˆ«å¯¹äº <strong>FilteredElementCollectors</strong> å°¤å…¶æœ‰ç”¨ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿå‡†ç¡®æ£€ç´¢ç‰¹å®šçš„å…ƒç´ ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¦æ”¶é›†æ–‡æ¡£ä¸­çš„æ‰€æœ‰ <strong>é¢ç§¯æ ‡ç­¾</strong> ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">area_tags = FilteredElementCollector(doc).OfCategory(BuiltInCategory.OST_AreaTags).ToElements()</span><br><span class="line">OUT = area_tags</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.13 æç¤º TaskDialog</title>
    <url>/2021/02/09/PythonScriptPrimer/2.13%20%E6%8F%90%E7%A4%BATaskDialog/</url>
    <content><![CDATA[<h2 id="åˆ›å»º-TaskDialog"><a href="#åˆ›å»º-TaskDialog" class="headerlink" title="åˆ›å»º TaskDialog"></a>åˆ›å»º TaskDialog</h2><p><strong>TaskDialogs</strong> æ˜¯ Revit ä¸­çš„ç”¨äºæä¾›è¯¦ç»†çš„ç”¨æˆ·åé¦ˆ API ç±»ã€‚å®ƒä»¬å¯ä»¥ç”¨ä¸€è¡Œä»£ç æ‰§è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">TaskDialog.Show(<span class="string">&quot;Example Title&quot;</span>, <span class="string">&quot;Example Text&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>TaskDialogs å¯ç”¨äºå‘ç”¨æˆ·æä¾›ä¸€å®šç¨‹åº¦çš„åé¦ˆï¼Œå¯èƒ½æ—¶æƒ³æŠ¥å‘Šè„šæœ¬æ˜¯æˆåŠŸè¿è¡Œè¿˜æ˜¯é‡åˆ°ä»€ä¹ˆé”™è¯¯ç­‰æƒ…å†µã€‚</p>
<p><img src=".//2.13.Taskdialog.JPG" alt="TaskDialogs"></p>
<hr>
<h2 id="è‡ªå®šä¹‰-TaskDialog"><a href="#è‡ªå®šä¹‰-TaskDialog" class="headerlink" title="è‡ªå®šä¹‰ TaskDialog"></a>è‡ªå®šä¹‰ TaskDialog</h2><p>TaskDialog ä¹Ÿå¯ä»¥é€šè¿‡ç±»çš„å±æ€§å¯¹å…¶è¿›è¡Œç¼–è¾‘ï¼Œä»¥ä½¿å†…å®¹æ›´åŠ ä¸°å¯Œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">task_dialog = TaskDialog(<span class="string">&quot;Example Title&quot;</span>)</span><br><span class="line">task_dialog.CommonButtons = TaskDialogCommonButtons.Cancel | TaskDialogCommonButtons.Ok | TaskDialogCommonButtons.Close |     TaskDialogCommonButtons.No | TaskDialogCommonButtons.Yes | TaskDialogCommonButtons.Retry | TaskDialogCommonButtons.<span class="literal">None</span></span><br><span class="line">task_dialog.FooterText = <span class="string">&quot;Example Footer Text&quot;</span></span><br><span class="line">task_dialog.MainInstruction = <span class="string">&quot;Example Main Instruction&quot;</span></span><br><span class="line">task_dialog.MainContent = <span class="string">&quot;This is the main content for this TaskDialog&quot;</span></span><br><span class="line"></span><br><span class="line">task_dialog.Show()</span><br></pre></td></tr></table></figure>
<p>æç¤ºçª—å£æ ·å¼</p>
<p><img src=".//2.13.Taskdialog02.JPG" alt="TaskDialogs"></p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.2 å¦‚ä½•é˜…è¯»Revitçš„APIæ–‡æ¡£</title>
    <url>/2021/02/09/PythonScriptPrimer/2.2%20%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BBRevit%E7%9A%84API%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h2 id="ä½¿ç”¨-APIDocs-Co"><a href="#ä½¿ç”¨-APIDocs-Co" class="headerlink" title="ä½¿ç”¨ APIDocs.Co"></a>ä½¿ç”¨ APIDocs.Co</h2><p>ç”±äºè¯¥ç½‘ç«™å¯¹äºå¸Œæœ›ç†Ÿæ‚‰ Revit API çš„äººæ¥è¯´æ˜¯éå¸¸å®è´µçš„èµ„æºï¼Œå› æ­¤æˆ‘ä»¬æä¾›äº†ä½¿ç”¨è¯¥ç½‘ç«™çš„ç®€è¦æŒ‡å—ã€‚</p>
<p><img src=".//2.2.API.png" alt="Api æ–‡æ¡£æ³¨é‡Š"></p>
<hr>
<p>å…¸å‹çš„å·¥ä½œæµç¨‹å°†æ¶‰åŠç¡®ä¿å·²ä¸ºè¦ä½¿ç”¨çš„äº§å“é€‰æ‹©åˆé€‚ç‰ˆæœ¬çš„ APIï¼ˆåœ¨å·¦çª—æ ¼ä¸­ï¼‰ï¼Œç„¶ååœ¨ API æ–‡æ¡£ä¸­æœç´¢æ‚¨å…³æ³¨çš„ç›¸å…³ä¸»é¢˜ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœè¦äº†è§£æœ‰å…³ <strong>FamilyInstance</strong> ç±»çš„æ›´å¤šä¿¡æ¯ï¼Œåªéœ€åœ¨æœç´¢æ ä¸­æœç´¢å®ƒï¼Œç„¶åä»è‡ªåŠ¨å®Œæˆé€‰é¡¹ä¸­é€‰æ‹©å®ƒå³å¯ã€‚ç„¶åï¼Œæœ‰å…³æ­¤ç±»çš„è¯¦ç»†ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨å³ä¾§çš„è¯¦ç»†ä¿¡æ¯çª—æ ¼ä¸­ï¼š</p>
<ol>
<li>è¿™æ˜¯æ‚¨æ­£åœ¨æŸ¥çœ‹çš„é¡µé¢çš„åç§°ã€‚Revit API æœ‰è¶…è¿‡ 22,000 é¡µï¼Œä½†å…¶ä¸­çš„å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸ç»å¸¸ä½¿ç”¨çš„ï¼</li>
<li>è¿™ä¸ª <strong>&lt;&gt;</strong> æŒ‰é’®å°†åœ¨å‡ ä¸ªæµè¡Œçš„ Github å­˜å‚¨åº“ä¸­æœç´¢æœ‰å…³è¯¥ç±»çš„ä»»ä½•ä»£ç ç¤ºä¾‹ã€‚</li>
<li><strong>Members</strong> å°†å¸¦æ‚¨åˆ°æ˜¾ç¤ºè¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå±æ€§ï¼Œæ¥å£æˆ–æ„é€ å‡½æ•°çš„æ•´ä¸ªé¡µé¢ã€‚</li>
</ol>
<h3 id="é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>é¢å‘å¯¹è±¡ç¼–ç¨‹</h3><p><strong>Members:</strong> ç±»çš„æˆå‘˜é¡µé¢åªæ˜¯å°†å…¶æ‰€æœ‰æ–¹æ³•ï¼Œå±æ€§ç­‰æ”¶é›†åœ¨ä¸€ä¸ªé¡µé¢ä¸Šã€‚å¦‚æœä¸ç¡®å®šæŸä¸ªç±»æ˜¯å¦å…·æœ‰ç‰¹å®šåŠŸèƒ½ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚</p>
<p><strong>Methods:</strong> ç±»æ–¹æ³•æ˜¯å®ƒå¯ä»¥è¿è¡Œçš„åŠŸèƒ½ã€‚å¯ä»¥å°†å®ƒä»¬è§†ä¸ºåŠ¨è¯ <strong>do something</strong> çš„å®ä¾‹å¯ä»¥åšä»€ä¹ˆã€‚ä¾‹å¦‚ï¼ŒFamilyInstance ç±»å‹çš„å¯¹è±¡å…·æœ‰ <strong>flipHand()</strong> æ–¹æ³•ï¼Œå¯è®©æ‚¨ç¿»è½¬å…¶å¤„ç†æ–¹å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯æ˜¯ä½¿ç”¨ flipHand ç¿»è½¬ my_family_instance å®ä¾‹å¯¹è±¡</span></span><br><span class="line">my_family_instance.flipHand()</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼šå¯¹ Revit æ–‡æ¡£æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½å¿…é¡»åœ¨å¼€å§‹äº‹åŠ¡ <strong>Transaction</strong> .</li>
</ul>
<p><strong>Properties:</strong> å±æ€§æ›´åƒæ˜¯ç±»çš„â€å½¢å®¹è¯â€ï¼Œå¯å¸®åŠ©æ‚¨äº†è§£æœ‰å…³è¯¥ç±»ç‰¹å®šå¯¹è±¡ï¼ˆå³å®ä¾‹ï¼‰çš„æ›´å¤šçŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒFamilyInstance ç±»å…·æœ‰ä¸€ä¸ª <strong>HandFlipped</strong> å±æ€§ï¼Œå¯ä»¥æŸ¥è¯¢è¯¥å±æ€§çš„å€¼ï¼Œååº”äº†è¯¥ç‰¹å®šå®ä¾‹çš„æ˜¯å¦å·²ç¿»è½¬ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™å°†è¿”å›Trueæˆ–Falseï¼Œå…·ä½“å–å†³äºå¯¹è±¡æ˜¯å¦ç¿»è½¬</span></span><br><span class="line">is_it_handflipped = my_family_instance.HandFlipped</span><br></pre></td></tr></table></figure>
<p><strong>Constructors:</strong></p>
<p>API ä¸­çš„æ„é€ å‡½æ•°å®é™…ä¸Šæ˜¯åœ¨å‘Šè¯‰æ‚¨å¦‚ä½•åˆ›å»ºç±»çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼ŒXYZ ç±»ç”¨äºåœ¨ Revit ä¸­å®šä¹‰ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„ç‚¹</span></span><br><span class="line">my_point = XYZ(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼šä¸ Dynamo ä¸åŒçš„æ˜¯ Revit åˆ›å»ºçš„å‡ ä½•å¯¹è±¡æ˜¯ä¸å¯è§çš„</li>
</ul>
<p><strong>Enumerations:</strong></p>
<p>è¿™äº›ä¹Ÿç§°ä¸ºæšä¸¾ï¼Œå®ƒä»¬æ˜¯ç¡¬ç¼–ç çš„åˆ—è¡¨ï¼Œé€šå¸¸ä¸æ‰“ç®—æ›´æ”¹å¹¶ä¸”å°†é€‰æ‹©é™åˆ¶ä¸ºä¸€ç»„é€‰é¡¹ã€‚äº¤é€šä¿¡å·ç¯çŠ¶æ€çš„æšä¸¾åº”ç±»ä¼¼äºï¼š</p>
<ul>
<li>Red</li>
<li>Yellow</li>
<li>Green</li>
</ul>
<p>å› æ­¤ï¼Œç”¨æˆ·åˆ›å»ºçš„ä»»ä½•äº¤é€šä¿¡å·ç¯å¯¹è±¡éƒ½éœ€è¦å°†å…¶äº¤é€šä¿¡å·ç¯çŠ¶æ€è®¾ç½®ä¸ºè½¯ä»¶ä¾›åº”å•†å®šä¹‰çš„é¢„å†™çŠ¶æ€ä¹‹ä¸€ã€‚æ‚¨å¯ä»¥é€‰æ‹©æšä¸¾å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># enumæšä¸¾ä¸­çš„ä¸€ç§é¢„å®šä¹‰çŠ¶æ€</span></span><br><span class="line">traffic_light_value = TrafficLightState.Green</span><br></pre></td></tr></table></figure>
<hr>
<p>Revit API ä¸­çš„ä¸€äº›å…³é”®çš„æšä¸¾ç±»å‹ï¼š</p>
<ul>
<li><strong>BuiltInCategory</strong> : ç±»å‹</li>
<li><strong>BuiltInParameter</strong> : å‚æ•°</li>
<li><strong>DisplayUnitType</strong> : å•ä½</li>
</ul>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.3 äº†è§£ Doc, UIDoc, App, UIApp</title>
    <url>/2021/02/09/PythonScriptPrimer/2.3%20%E4%BA%86%E8%A7%A3%20Doc,%20UIDoc,%20App,%20UIApp/</url>
    <content><![CDATA[<h2 id="æ ·æ¿ä»£ç "><a href="#æ ·æ¿ä»£ç " class="headerlink" title="æ ·æ¿ä»£ç "></a>æ ·æ¿ä»£ç </h2><p>æ­£å¦‚åœ¨æ ·æ¿ä»£ç ä¸€ç« ä¸­æ‰€è§ï¼ŒRevit æ ·æ¿ä»£ç é€šå¸¸éœ€è¦è®¾ç½® Revit åº”ç”¨ç¨‹åºå’Œæ–‡æ¡£ <strong>docï¼Œuidocï¼Œappï¼Œuiapp</strong>çš„å¥æŸ„ã€‚</p>
<p>ä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h2 id="Application-and-Document"><a href="#Application-and-Document" class="headerlink" title="Application and Document"></a>Application and Document</h2><p>ä¸€å¼€å§‹ï¼ŒAPI çš„è¿™ä¸€éƒ¨åˆ†ä¼¼ä¹æœ‰äº›æ··ä¹±ã€‚é—®é¢˜æ¯”æ¯”çš†æ˜¯ï¼šRevit ä¸èƒ½ä»…ç®—å‡ºæˆ‘æ‰€å¤„çš„æ–‡æ¡£ï¼ˆå³æ¨¡å‹ï¼‰å—ï¼Ÿä¸ºä»€ä¹ˆæˆ‘æœ‰ä¸€ä¸ª Document å’Œä¸€ä¸ª UIDocumentï¼Ÿä¸ºä»€ä¹ˆè¦å¼•ç”¨åº”ç”¨ç¨‹åº-åº”ç”¨ç¨‹åºä¸æ˜¯ Revit å—ï¼Ÿ è¿™äº›æ˜¯å¾ˆå¥½çš„é—®é¢˜ã€‚å¹¸è¿çš„æ˜¯ï¼ŒRevit çš„ API æŒ‡å—ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›ç­”æ¡ˆï¼š</p>
<blockquote>
<p>Revit Platform API ä¸­çš„é¡¶çº§å¯¹è±¡æ˜¯åº”ç”¨ç¨‹åºå’Œæ–‡æ¡£ã€‚è¿™äº›ç”±ç±» Applicationï¼ŒUIApplicationï¼ŒDocument å’Œ UIDocument è¡¨ç¤ºã€‚</p>
<ul>
<li><strong>åº”ç”¨ç¨‹åºå¯¹è±¡å¼•ç”¨ä¸€ä¸ªå•ç‹¬çš„ Revit ä¼šè¯</strong> æä¾›å¯¹æ–‡æ¡£ï¼Œé€‰é¡¹ä»¥åŠå…¶ä»–åº”ç”¨ç¨‹åºèŒƒå›´çš„æ•°æ®å’Œè®¾ç½®çš„è®¿é—®ã€‚<ul>
<li><strong>Autodesk.Revit.UI.UIApplication</strong> æä¾›å¯¹åº”ç”¨ç¨‹åºçš„ UI çº§åˆ«ç•Œé¢çš„è®¿é—®ï¼ŒåŒ…æ‹¬å°† RibbonPanels æ·»åŠ åˆ°ç”¨æˆ·ç•Œé¢çš„èƒ½åŠ›ï¼Œä»¥åŠåœ¨ç”¨æˆ·ç•Œé¢ä¸­è·å–æ´»åŠ¨æ–‡æ¡£çš„èƒ½åŠ›ã€‚</li>
<li><strong>Autodesk.Revit.ApplicationServices.Application</strong> æä¾›å¯¹æ‰€æœ‰å…¶ä»–åº”ç”¨ç¨‹åºçº§åˆ«å±æ€§çš„è®¿é—®ã€‚</li>
</ul>
</li>
<li><strong>è¯¥æ–‡æ¡£å¯¹è±¡æ˜¯ä»£è¡¨å»ºç­‘æ¨¡å‹çš„å•ä¸ª Revit é¡¹ç›®æ–‡ä»¶</strong> Revit å¯ä»¥æ‰“å¼€å¤šä¸ªé¡¹ç›®ï¼Œå¹¶ä¸ºä¸€ä¸ªé¡¹ç›®æä¾›å¤šä¸ªè§†å›¾ã€‚<ul>
<li><strong>Autodesk.Revit.UI.UIDocument</strong> æä¾›å¯¹æ–‡æ¡£çš„ UI çº§åˆ«ç•Œé¢çš„è®¿é—®ï¼Œä¾‹å¦‚é€‰æ‹©å†…å®¹ä»¥åŠæç¤ºç”¨æˆ·è¿›è¡Œé€‰æ‹©å’Œé€‰æ‹©ç‚¹çš„åŠŸèƒ½</li>
<li><strong>Autodesk.Revit.DB.Document</strong> æä¾›å¯¹æ‰€æœ‰å…¶ä»–æ–‡æ¡£çº§åˆ«å±æ€§çš„è®¿é—®</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li>ä¸€æ¬¡å¯ä»¥æ‰“å¼€å¤šä¸ª Revit æ–‡æ¡£ï¼ˆåŒ…æ‹¬.rfa æ–‡ä»¶ï¼‰ï¼Œå› æ­¤éœ€è¦æŒ‡å®šè¦å®šä½çš„æ–‡æ¡£ã€‚</li>
<li>æ‚¨è¿˜å¯ä»¥å…·æœ‰å¤šä¸ª Revit åº”ç”¨ç¨‹åºçš„è¿è¡Œå®ä¾‹ï¼Œå› æ­¤æ‚¨éœ€è¦æŒ‡å®šè¦å®šä½çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>Document / UIDocument å’Œ Application / UIApplication æ‹†åˆ†æ˜¯ç”± API è®¾è®¡äººå‘˜å†³å®šçš„ã€‚UI ç±»é€šå¸¸å¼•ç”¨ç”¨æˆ·ç•Œé¢å…ƒç´ æˆ–éœ€è¦äº¤äº’çš„å…ƒç´ ï¼ˆä¾‹å¦‚æç¤ºç”¨æˆ·åœ¨ä¸» Revit çª—å£ä¸­é€‰æ‹©å…ƒç´ ï¼‰ã€‚</li>
</ul>
<p>ä¸»è¦è¦çŸ¥é“çš„æ˜¯ï¼Œæˆ‘ä»¬çš„æ ·æ¿ä»£ç ä¸­çš„ docï¼Œuidocï¼Œapp å’Œ uiapp å¥æŸ„å¯¹äºæ¶‰åŠç¼–è¾‘ Revit æ–‡æ¡£çš„è®¸å¤šæ“ä½œéƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä¾‹å¦‚ï¼Œè¦åˆ é™¤æŸäº›å†…å®¹ï¼Ÿæ‚¨éœ€è¦å‚è€ƒè¦ä»ä¸­åˆ é™¤å†…å®¹çš„æ–‡æ¡£ï¼</p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.4 å±•å¼€Revitå…ƒç´ </title>
    <url>/2021/02/09/PythonScriptPrimer/2.4%20%E5%B1%95%E5%BC%80Revit%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<h2 id="About-Unwrapping"><a href="#About-Unwrapping" class="headerlink" title="About Unwrapping"></a><strong>About Unwrapping</strong></h2><p>å±•å¼€å…ƒç´ ï¼Ÿç°åœ¨æœ‰ä¸€äº›å¥‡æ€ªçš„æœ¯è¯­ï¼ç®€è€Œè¨€ä¹‹ï¼šå¼•å…¥èŠ‚ç‚¹çš„ Revit å…ƒç´ åœ¨ä½¿ç”¨å‰éœ€è¦å…ˆâ€™unwrappedâ€™ã€‚ ä½†æ˜¯ä¸ºäº†äº†è§£æ‰€æœ‰å«ä¹‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ Dynamo çš„æœ€åˆå¼€å‘æ–¹å¼æœ‰ä¸€ç‚¹äº†è§£ã€‚</p>
<hr>
<h3 id="å›é¡¾å†å²-ğŸ°"><a href="#å›é¡¾å†å²-ğŸ°" class="headerlink" title="å›é¡¾å†å² ğŸ°"></a><strong>å›é¡¾å†å² ğŸ°</strong></h3><p>Dynamo æœ€åˆè¢«è®¤ä¸ºæ˜¯ <strong>Ian Keough</strong> çš„å¼€æºçˆ±å¥½é¡¹ç›®ã€‚Dynamo æœ€åˆä»…ç”¨äºä¸ Revit é›†æˆï¼Œä½†å®ƒè¿˜éœ€è¦ Revit API æœ¬èº«ä¸æä¾›çš„æ‰©å±•åŠŸèƒ½ï¼Œä¾‹å¦‚å¯è§†åŒ–æŠ½è±¡å‡ ä½•ã€‚</p>
<p>å›´ç»•æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯ï¼ŒIan çš„æ–°åº”ç”¨ç¨‹åºä½¿ç”¨å…¶è‡ªå·±çš„ç­‰æ•ˆç±»å‹å®è´¨ä¸Šå°è£… Revit API ä¸­çš„å¤§çº¦ 1700 ä¸ªç±»-è¿™äº›ç±»å‹çš„åŠŸèƒ½å¯ä»¥æ ¹æ® Dynamo çš„è¦æ±‚è¿›è¡Œæ„å»ºã€‚</p>
<p>å› æ­¤ï¼ŒRevit çš„ç±»ä¸ Dynamo çš„ç­‰æ•ˆç±»ä¹‹é—´å­˜åœ¨ç»†å¾®ä¸”ä¸å¯å¯Ÿè§‰çš„å·®å¼‚ï¼ˆæ­¤ç±»ç±»ç§°ä¸ºâ€œåŒ…è£…å™¨ç±»â€ï¼‰ã€‚</p>
<hr>
<p>å¦‚æœæˆ‘ä»¬æ£€æŸ¥ Revit å¯¹è±¡çš„ç±»åç§°åŠå…¶ç­‰æ•ˆçš„ Dynamo å¯¹è±¡ï¼Œåˆ™å¯ä»¥çœ‹åˆ°ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ Level å¯¹è±¡ï¼š</p>
<ul>
<li>åœ¨ Revit çš„ API ä¸­ï¼ŒLevel ç±»çš„å®Œå…¨é™å®šåç§°ä¸ºï¼š<strong>Autodesk.Revit.DB.Level</strong></li>
<li>åœ¨ Dynamo ä¸­ï¼ŒLevel ç±»çš„å®Œå…¨é™å®šåç§°ä¸ºï¼š<strong>Revit.Elements.Level</strong></li>
</ul>
<h2 id="ç¼–ç -ToRevitType"><a href="#ç¼–ç -ToRevitType" class="headerlink" title="ç¼–ç  ToRevitType"></a>ç¼–ç  ToRevitType</h2><p>é€šå¸¸ï¼ŒDynamo ä¼šå®Œæˆè¿™ä¸¤ä¸ªå·¥ä½œä¹‹é—´çš„æ‰€æœ‰å·¥ä½œï¼Œå³ä¸å¯è§åœ°åŒ…è£¹å’Œå±•å¼€åŒ…è£¹å…ƒç´ ã€‚é™¤äº†ç¼–å†™ä»£ç æ—¶ï¼Œæˆ‘ä»¬ä¸å¿…æ‹…å¿ƒå…·ä½“çš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<p>åœ¨ç¼–å†™ IronPython è„šæœ¬æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†å…ƒç´ ä½œä¸ºè¾“å…¥æä¾›ç»™ Python è„šæœ¬èŠ‚ç‚¹ã€‚åœ¨æˆ‘ä»¬è§£å¼€å®ƒä»¬ä¹‹å‰ï¼Œè¿™äº›å…ƒç´ ä»å°†æ˜¯ Dynamo çš„â€åŒ…è£…â€ç±»å‹ã€‚åœ¨æˆ‘ä»¬è¿™æ ·åšä¹‹å‰ï¼ŒRevit çš„ç±»å‹å’Œ Dynamo çš„ç­‰æ•ˆç±»å‹ä¸èƒ½å¾ˆå¥½åœ°é…åˆä½¿ç”¨ã€‚</p>
<p>å±•å¼€å…ƒç´ éå¸¸ç®€å•ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ UnwrapElement() æ–¹æ³•</span></span><br><span class="line"><span class="comment"># å°† Dynamo å…ƒç´ ç±»å‹è½¬æ¢ä¸º Revit å…ƒç´ ç±»å‹</span></span><br><span class="line">revitElements = UnwrapElement(IN[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>æ³¨æ„ï¼š</strong> æœªèƒ½ä½¿ç”¨ UnwrapElement æœ¬èº«ä¸ä¼šå¼•å‘é”™è¯¯ï¼Œä½†æ˜¯åœ¨è¯»å–å±æ€§æˆ–ä½¿ç”¨åŒ…è£…ç±»å‹çš„æ–¹æ³•æ—¶ä¼šå‡ºé”™ã€‚</li>
</ul>
<hr>
<p>æ— éœ€æ€»æ˜¯è§£å¼€å…ƒç´  **UnwrapElement()**ï¼Œä»…å½“å®ƒä»¬ä» Python Script èŠ‚ç‚¹å¤–éƒ¨ä¼ å…¥æ—¶ä½¿ç”¨å³å¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ FilteredElementCollector æ”¶é›†å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å°†ç»•è¿‡ Dynamo å¹¶ç›´æ¥ä¸ Revit çš„ API è·å–æ•°æ®ï¼Œè¯¥ API å°† Revit çš„æœ¬èº«ç±»å‹è¿”å›ç»™æˆ‘ä»¬ï¼Œæ‰€ä»¥ä¸éœ€è¦è§£å¼€å…ƒç´ ï¼</p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.5 è¿‡æ»¤å™¨ FilteredElementCollector</title>
    <url>/2021/02/09/PythonScriptPrimer/2.5%20%E8%BF%87%E6%BB%A4%E5%99%A8%20FilteredElementCollector/</url>
    <content><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>å¤„ç†æ¨¡å‹çš„å‰ææ˜¯è·å–åˆ°ç›¸åº”ç±»å‹çš„å…ƒç´ ã€‚Revit çš„ <strong>FilteredElementCollector</strong> å…è®¸æ‚¨ä½¿ç”¨ä¸€ç»„è‡ªå®šä¹‰çš„è¿‡æ»¤è§„åˆ™ï¼Œåœ¨ Revit æ–‡æ¡£çš„æ•°æ®åº“ä¸­å¿«é€Ÿæœç´¢å…ƒç´ ã€‚æ‚¨å¯ä»¥å°†æœç´¢è¿‡æ»¤å™¨å’Œä¿®é¥°ç¬¦å †å åœ¨ä¸€èµ·ï¼Œä»è€Œä½¿æ‚¨å¯ä»¥è¿›è¡Œå‡ ä¹æ— é™æ¬¡çš„è‡ªå®šä¹‰æœç´¢ã€‚</p>
<a id="more"></a>

<h2 id="ä¸¾ä¸ªç®€å•çš„ä¾‹å­"><a href="#ä¸¾ä¸ªç®€å•çš„ä¾‹å­" class="headerlink" title="ä¸¾ä¸ªç®€å•çš„ä¾‹å­"></a>ä¸¾ä¸ªç®€å•çš„ä¾‹å­</h2><p><em>FilteredElementCollectors</em> å°†è¿”å› <em>Element</em> æˆ– <em>ElementIds</em> çš„åˆ—è¡¨ã€‚</p>
<p>å¿«é€Ÿç»„åˆåœ¨ä¸€èµ·éå¸¸ç®€å•ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">all_furniture = FilteredElementCollector(doc)             <span class="comment"># åˆ›å»ºè¿‡æ»¤å™¨</span></span><br><span class="line">all_furniture.OfCategory(BuiltInCategory.OST_Furniture)   <span class="comment"># è¿‡æ»¤å®¶å…·ï¼ˆåŒ…å«ï¼šå®ä¾‹å’Œç±»å‹ï¼‰</span></span><br><span class="line">all_furniture.WhereElementIsNotElementType()              <span class="comment"># è¿‡æ»¤é¡¹ç›®ä¸­å®¶å…·å®ä¾‹</span></span><br><span class="line">all_furniture.ToElements()                                <span class="comment"># ç»“æœè½¬æ¢ä¸ºElementå¯¹è±¡åˆ—è¡¨</span></span><br><span class="line">OUT = all_furniture                                       <span class="comment"># è¾“å‡ºå¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>è¿™æ®µä»£ç é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ <em>FilteredElementCollector</em> å®ä¾‹ï¼Œè¯¥å®ä¾‹å°† Revit æ–‡æ¡£ä½œä¸ºå…¶æ„é€ å‡½æ•°ä¸­çš„å‚æ•°ã€‚</li>
<li>ç¬¬ 4 è¡Œæ·»åŠ äº†ä¸€ä¸ªè¿›ä¸€æ­¥çš„è¿‡æ»¤å™¨-æˆ‘ä»¬ä¸æƒ³åœ¨è¿”å›çš„å…ƒç´ ä¸­ä»…åŒ…å«å®¶å…·æ—ç±»å‹ï¼Œè€Œä»…æ˜¯å®ä¾‹ã€‚</li>
<li>åœ¨ç¬¬ 5 è¡Œä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šæˆ‘ä»¬å¸Œæœ› FilteredElementCollector è¿”å›å®é™…çš„ Revit å…ƒç´ ã€‚</li>
<li>æœ€åï¼Œç¬¬ 6 è¡Œä½¿ç”¨ <em>OUT</em> ä»èŠ‚ç‚¹è¾“å‡ºæ”¶é›†çš„å…ƒç´ ã€‚</li>
</ol>
</blockquote>
<p>ä¹Ÿå¯ä»¥å°†ä¸Šè¿°è„šæœ¬å‹ç¼©ä¸ºä¸€è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">all_furniture = FilteredElementCollector(doc).OfCategory(BuiltInCategory.OST_Furniture).WhereElementIsNotElementType().ToElements()</span><br><span class="line">OUT = all_furniture</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™ä¸¤ä¸ªè„šæœ¬å°†è¿”å›å®Œå…¨ç›¸åŒçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é€‰æ‹©ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬:è¾ƒé•¿çš„ç‰ˆæœ¬è¿˜æ˜¯è¾ƒå†—é•¿çš„ç‰ˆæœ¬</li>
<li>å»ºè®®ä½¿ç”¨ä¸‹é¢è¿™ç§ç®€æ´</li>
</ul>
<h2 id="è¿‡æ»¤å™¨ä½¿ç”¨æŒ‡å—"><a href="#è¿‡æ»¤å™¨ä½¿ç”¨æŒ‡å—" class="headerlink" title="è¿‡æ»¤å™¨ä½¿ç”¨æŒ‡å—"></a><strong>è¿‡æ»¤å™¨ä½¿ç”¨æŒ‡å—</strong></h2><p><strong>å…³äºå¦‚ä½•ä¸ºå…ƒç´ ç»„è£…åŸºæœ¬è¿‡æ»¤å™¨çš„åˆ†æ­¥æŒ‡å—ï¼š</strong></p>
<ol>
<li><p><strong>çŸ¥é“æ‚¨è¦è¿‡æ»¤çš„å†…å®¹</strong></p>
<ul>
<li><p>å¦‚æœè¿™æ˜¯ Revit ç±»åˆ«çš„å…ƒç´ ï¼Œè¯·åœ¨ <strong>BuiltInCategory</strong> æšä¸¾ä¸­æ‰¾åˆ°ç­‰æ•ˆçš„ <strong>BuiltInCategory</strong> ç±»å‹ã€‚</p>
</li>
<li><p>å¦åˆ™ï¼Œå¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ç‰¹å®š API ç±»çš„å…ƒç´ ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <strong>.OfClass()</strong> è¿‡æ»¤å™¨ï¼Œå¹¶åœ¨ <em>Class</em> åç§°ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°ç±»åˆ«ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>æ‚¨æ˜¯å¦è¦è¿”å›å…ƒç´ å®ä¾‹æˆ–å…¶ç±»å‹</strong></p>
<ul>
<li>ä¾‹å¦‚ï¼Œæ‚¨è¦æŸ¥æ‰¾æ–‡æ¡£ä¸­çš„æ‰€æœ‰ <strong>TextNotes</strong> å®ä¾‹è¿˜æ˜¯æ‰€æœ‰ <strong>TextNoteTypes</strong> æ—ç±»å‹<ul>
<li>å¦‚æœéœ€è¦å®ä¾‹ï¼Œè¯·ä½¿ç”¨ <strong>.WhereElementIsNotElementType()</strong> è¿‡æ»¤å™¨</li>
<li>å¦‚æœéœ€è¦ç±»å‹ï¼Œè¯·ä½¿ç”¨ <strong>.WhereElementIsElementType()</strong> è¿‡æ»¤å™¨</li>
<li>å¦‚æœæ‚¨ä¸¤è€…éƒ½æƒ³è¦ï¼Œåˆ™ä¸è¦ä½¿ç”¨è¿‡æ»¤å™¨</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>æ˜¯å¦è¦è¿”å› Revit å…ƒç´ æˆ–å…ƒç´ çš„ ID</strong></p>
<ul>
<li>ä½¿ç”¨ <strong>.ToElements()</strong> æˆ– <strong>.ToElementIds()</strong> å®Œæˆæ‚¨çš„ <strong>FilteredElementCollector</strong> æŸ¥è¯¢ã€‚</li>
</ul>
</li>
</ol>
<h2 id="è¿›é˜¶ç­›é€‰"><a href="#è¿›é˜¶ç­›é€‰" class="headerlink" title="è¿›é˜¶ç­›é€‰"></a>è¿›é˜¶ç­›é€‰</h2><p>ä¸Šé¢æ˜¯æ„å»ºåŸºæœ¬ <strong>FilteredElementCollector</strong> çš„å¤§è‡´æŒ‡å—ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥æ„å»ºæ›´å¤šè‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼š</p>
<ul>
<li><p>æ‚¨å¯ä»¥ä½¿ç”¨ <strong>ElementLevelFilter</strong> æ¥è¿‡æ»¤æŸä¸ªçº§åˆ«ä¸Šæ‰˜ç®¡çš„å…ƒç´ ï¼Œæˆ–è€…ä½¿ç”¨ <strong>ElementWorksetFilter</strong> æ¥ä»…è¿‡æ»¤ç‰¹å®šå·¥ä½œé›†ä¸Šçš„å…ƒç´ ã€‚</p>
</li>
<li><p>æ‚¨å¯ä»¥å»ºç«‹è‡ªå®šä¹‰è¯„ä¼°è§„åˆ™ã€‚æ˜¯å¦ä»…åœ¨æŒ‡å®šå‚æ•°å€¼æˆ– Height å‚æ•°å¤§äº 3000mm çš„å…ƒç´ ä¸­å¯»æ‰¾å…ƒç´ ï¼Ÿè¿™äº›éƒ½æ˜¯å¯ä»¥è½»æ¾å®ç°çš„ã€‚</p>
</li>
<li><p>æ­¤é¡µé¢åªæ˜¯åˆ®æ“¦ <strong>FilteredElementCollectors</strong> çš„è¡¨é¢ã€‚</p>
</li>
</ul>
<hr>
<h3 id="å¿«é€Ÿè¿‡æ»¤å™¨-QuickFilters"><a href="#å¿«é€Ÿè¿‡æ»¤å™¨-QuickFilters" class="headerlink" title="å¿«é€Ÿè¿‡æ»¤å™¨-QuickFilters"></a>å¿«é€Ÿè¿‡æ»¤å™¨-QuickFilters</h3><ul>
<li><strong>ElementCategoryFilter</strong> ï¼šä¸è¾“å…¥ç±»åˆ« ID åŒ¹é…çš„å…ƒç´ ï¼›<ul>
<li>å¿«æ·æ–¹å¼ï¼š<strong>OfCategory</strong></li>
</ul>
</li>
<li><strong>ElementClassFilter</strong>ï¼šä¸è¾“å…¥è¿è¡Œæ—¶ç±»åŒ¹é…çš„å…ƒç´ ï¼›<ul>
<li>å¿«æ·æ–¹å¼ï¼š<strong>OfClass</strong></li>
</ul>
</li>
<li><strong>ElementIsElementTypeFilter</strong>ï¼šæ˜¯â€œå…ƒç´ ç±»å‹â€ï¼ˆç¬¦å·ï¼‰çš„å…ƒç´ ï¼›<ul>
<li>å¿«æ·æ–¹å¼ï¼š<strong>WhereElementIsElementType / WhereElementIsNotElementType</strong></li>
</ul>
</li>
<li><strong>ElementOwnerViewFilter</strong>ï¼šç‰¹å®šäºè§†å›¾çš„å…ƒç´ ï¼›<ul>
<li>å¿«æ·æ–¹å¼ï¼š<strong>OwnedByView / WhereElementIsViewIndependent</strong></li>
</ul>
</li>
<li><strong>ElementDesignOptionFilter</strong>ï¼šç‰¹å®šè®¾è®¡é€‰é¡¹ä¸­çš„å…ƒç´ ï¼›<ul>
<li>å¿«æ·æ–¹å¼ï¼š<strong>ContainedInDesignOption</strong></li>
</ul>
</li>
<li><strong>ElementIsCurveDrivenFilter</strong>ï¼šæ›²çº¿é©±åŠ¨çš„å…ƒç´ ï¼›<ul>
<li>å¿«æ·æ–¹å¼ï¼š<strong>WhereElementIsCurveDriven</strong></li>
</ul>
</li>
<li><strong>ElementStructuralTypeFilter</strong>ï¼šåŒ¹é…ç»™å®šç»“æ„ç±»å‹çš„å…ƒç´ </li>
<li><strong>FamilySymbolFilter</strong>ï¼šç‰¹å®šå®¶åº­çš„ç¬¦å·</li>
<li><strong>ExclusionFilter</strong>ï¼šé™¤è¾“å…¥åˆ°è¿‡æ»¤å™¨ä¸­çš„å…ƒç´  ID ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ </li>
<li><strong>BoundingBoxIntersectsFilter</strong>ï¼šå…·æœ‰ä¸ç»™å®šè½®å»“ç›¸äº¤çš„è¾¹ç•Œæ¡†çš„å…ƒç´ </li>
<li><strong>BoundingBoxIsInsideFilter</strong>ï¼šåœ¨ç»™å®šè½®å»“å†…å…·æœ‰è¾¹ç•Œæ¡†çš„å…ƒç´ </li>
<li><strong>BoundingBoxContainsPointFilter</strong>ï¼šå…·æœ‰åŒ…å«ç»™å®šç‚¹çš„è¾¹ç•Œæ¡†çš„å…ƒç´ </li>
</ul>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.6 å‡ ä½•(Geometry)è½¬æ¢</title>
    <url>/2021/02/09/PythonScriptPrimer/2.6%20%E5%87%A0%E4%BD%95(Geometry)%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<h2 id="Revit-å‡ ä½•å›¾å½¢å’Œ-Dynamo-å‡ ä½•å›¾å½¢"><a href="#Revit-å‡ ä½•å›¾å½¢å’Œ-Dynamo-å‡ ä½•å›¾å½¢" class="headerlink" title="Revit å‡ ä½•å›¾å½¢å’Œ Dynamo å‡ ä½•å›¾å½¢"></a>Revit å‡ ä½•å›¾å½¢å’Œ Dynamo å‡ ä½•å›¾å½¢</h2><p>Dynamo å…·æœ‰ä¸ Revit å¹¶è¡Œçš„ç±»åº“ã€‚æ„å‘³ç€éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„è½¬æ¢æ–¹æ³•æ¥ä½¿ä¸¤è€…ä¹‹é—´è¿›è¡Œè½¬æ¢å®ç°æ•°æ®äº¤äº’ã€‚å‰é¢ç« èŠ‚ä¹Ÿæåˆ°è¿‡éœ€è¦å±•å¼€å¯¹è±¡ã€‚</p>
<a id="more"></a>

<h2 id="è½¬æ¢æ–¹å¼"><a href="#è½¬æ¢æ–¹å¼" class="headerlink" title="è½¬æ¢æ–¹å¼"></a>è½¬æ¢æ–¹å¼</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨ Dynamo API çš„è½¬æ¢æ–¹æ³•è½»æ¾åœ°åœ¨ Dynamo å’Œ Revit å‡ ä½•ç±»å‹ä¹‹é—´è¿›è¡Œåˆ‡æ¢:</p>
<ul>
<li><strong>ToProtoType()</strong></li>
<li><strong>ToDSType()</strong></li>
<li><strong>ToLine()</strong></li>
<li><strong>ToPoint()</strong></li>
<li><strong>ToVector()</strong></li>
<li><strong>ToXyz()</strong></li>
</ul>
<h2 id="Points"><a href="#Points" class="headerlink" title="Points"></a>Points</h2><p>Revit ç‚¹åœ¨ 3D ç©ºé—´ä¸­ç”±å…¶ Xï¼ŒY å’Œ Z åæ ‡å®šä¹‰ã€‚åˆ›å»ºæ–¹æ³•ï¼šå…ˆåˆ›å»ºç‚¹çš„å¯¹è±¡ <strong>Autodesk.Revit.DB.XYZ</strong>ï¼Œåœ¨åˆ›å»º Revit ç‚¹ <strong>Autodesk.Revit.DB.Point.Create</strong> æ–¹æ³•åˆ›å»ºï¼Œè¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ç‚¹çš„å¯¹è±¡ã€‚</p>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">XYZ revit_xyz = <span class="keyword">new</span> Autodesk.Revit.DB.XYZ(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="comment">// åˆ›å»ºç‚¹å¯¹è±¡</span></span><br><span class="line">Point revit_point = Autodesk.Revit.DB.Point.Create(revit_xyz) <span class="comment">// åˆ›å»ºç‚¹</span></span><br></pre></td></tr></table></figure>
<p>è¦åˆ›å»º Dynamo ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Designscript åº“ï¼Œè¯¥åº“æ˜¯ Dynamo çš„ä¸€éƒ¨åˆ†ã€‚Dynamo ç‚¹çš„ç±»å‹ä¸º <strong>Autodesk.DesignScript.Geometry.Point</strong> å¦‚æœä» Python èŠ‚ç‚¹è¾“å‡ºä»¥ä¸‹ dynamo_pointï¼Œå®ƒå°†ç«‹å³æ˜¾ç¤ºåœ¨ Dynamo çš„ 3D èƒŒæ™¯é¢„è§ˆä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dynamo_point = Autodesk.DesignScript.Geometry.Point.ByCoordinates(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="comment"># åˆ›å»ºç‚¹</span></span><br><span class="line">OUT = dynamo_point  <span class="comment"># è¾“å‡ºç‚¹è§†å›¾å°†æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼šå³ä½¿æˆ‘ä»¬åœ¨è¿™é‡Œåˆ›å»º Revit å¯¹è±¡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¹Ÿä¸éœ€è¦å°†å®ƒä»¬åŒ…è£…åœ¨ <strong>Transaction</strong> äº‹åŠ¡ä¸­ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">revit_xyz = Autodesk.Revit.DB.XYZ(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="comment"># Revit XYZ</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨XYZå¯¹è±¡åˆ›å»ºç‚¹</span></span><br><span class="line">revit_point = Autodesk.Revit.DB.Point.Create(revit_xyz)</span><br><span class="line">OUT = revit_xyz, revit_point</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ä» Python è„šæœ¬èŠ‚ç‚¹è¾“å‡º XYZ å’Œ Pointï¼Œä½†æ˜¯é™¤éå°†å®ƒä»¬è½¬æ¢ä¸º Dynamo ç±»å‹ï¼Œå¦åˆ™å®ƒä»¬å°†åœ¨ Dynamo å‡ ä½•é¢„è§ˆä¸­ä¸å¯è§ï¼š <em>ToPoint() ToProtoType()</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">revit_xyz = Autodesk.Revit.DB.XYZ(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">revit_point = Autodesk.Revit.DB.Point.Create(revit_xyz)</span><br><span class="line">OUT = revit_xyz.ToPoint(), revit_point.ToProtoType()</span><br></pre></td></tr></table></figure>
<h2 id="Lines-Curves"><a href="#Lines-Curves" class="headerlink" title="Lines / Curves"></a>Lines / Curves</h2><p>â€‹â€‹ å…ˆçœ‹ä¸€ä¸‹ Dynamo ç±»ï¼šDynamo æœ‰ä¸¤ä¸ª<strong>çº¿å‹</strong>å‡ ä½•ç±»ã€‚äº†è§£ä»–ä»¬ä¹‹é—´å­˜åœ¨åŒºåˆ«ã€‚</p>
<ul>
<li><strong>Autodesk.DesignScript.Geometry.Line</strong> çº¿æ®µï¼Œå…·æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</li>
<li><strong>Autodesk.DesignScript.Geometry.Curve</strong> å¤æ‚çš„æ›²é¢æˆ– UV åæ ‡ã€‚Dynamo çš„ <strong>Curve</strong> ç±»åŒ…å« <strong>Line</strong> ã€‚</li>
</ul>
<p>ä¸ºäº†ä½¿è¿™ä¸ªç¤ºä¾‹ç®€å•ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢æ˜¾ç¤ºå¦‚ä½•åˆ›å»ºä¸€æ¡ç®€å•çš„ Dynamo è¡Œã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»º Dynamo ç‚¹ï¼Œç„¶åå°†å…¶ç”¨ä½œå®šä¹‰ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dynamo_point_1 = Autodesk.DesignScript.Geometry.Point.ByCoordinates(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)   <span class="comment"># åˆ›å»ºèµ·ç‚¹</span></span><br><span class="line">dynamo_point_2 = Autodesk.DesignScript.Geometry.Point.ByCoordinates(<span class="number">10</span>,<span class="number">10</span>,<span class="number">0</span>) <span class="comment"># åˆ›å»ºç»ˆç‚¹</span></span><br><span class="line">dynamo_line = Autodesk.DesignScript.Geometry.Line.ByStartPointEndPoint(dynamo_point_1, dynamo_point_2) <span class="comment"># ä¼ å…¥å‚æ•°èµ·ç‚¹å’Œç»ˆç‚¹åˆ›å»ºDynamoçº¿æ®µ</span></span><br><span class="line">OUT = dynamo_line <span class="comment"># è¿”å›çº¿æ®µ</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢å°è¯•ä½¿ç”¨ python è„šæœ¬èŠ‚ç‚¹è¾“å‡ºï¼Œå¹¶ä½¿ç”¨ <strong>ToProtoType()</strong> å°†å…¶è½¬æ¢ä¸º Dynamo å‡ ä½•ç±»å‹ï¼Œå¦åˆ™åœ¨ Dynamo å‡ ä½•é¢„è§ˆä¸­å°†ä¸å¯è§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">revit_xyz_1 = XYZ(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">revit_xyz_2 = XYZ(<span class="number">10</span>,<span class="number">10</span>,<span class="number">0</span>)</span><br><span class="line">revit_line = Line.CreateBound(revit_xyz_1, revit_xyz_2)</span><br><span class="line">OUT = revit_line.ToProtoType()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.7 è®¿é—®å›¾å…ƒå‚æ•° Parameters</title>
    <url>/2021/02/09/PythonScriptPrimer/2.7%20%E8%AE%BF%E9%97%AE%E5%9B%BE%E5%85%83%E5%8F%82%E6%95%B0%20Parameters/</url>
    <content><![CDATA[<h2 id="æ—ã€æ—ç±»å‹ã€æ—å®ä¾‹ä¹‹é—´çš„å…³ç³»"><a href="#æ—ã€æ—ç±»å‹ã€æ—å®ä¾‹ä¹‹é—´çš„å…³ç³»" class="headerlink" title="æ—ã€æ—ç±»å‹ã€æ—å®ä¾‹ä¹‹é—´çš„å…³ç³»"></a>æ—ã€æ—ç±»å‹ã€æ—å®ä¾‹ä¹‹é—´çš„å…³ç³»</h2><p>Revit çš„æ—ç³»ä½¿ç”¨æ—ç±»å‹å’Œæ—å®ä¾‹ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ã€‚API ä¸­å¹¶è¡Œå­˜åœ¨ç›¸åŒçš„å…³ç³»ï¼š</p>
<ul>
<li><strong>æ—å®ä¾‹</strong> æ˜¯ Revit çš„ <strong>FamilyInstance</strong> ç±»çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼šé¡¹ç›®ä¸­åˆ›å»ºçš„é—¨ã€çª—</li>
<li><strong>æ—ç±»å‹</strong> æ˜¯ Revit çš„ <strong>FamilyType</strong> ç±»çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼šé˜²ç«é—¨ FM1822 ç±»å‹</li>
</ul>
<a id="more"></a>

<hr>
<p>æ—å®ä¾‹å‚æ•°é€šè¿‡ <strong>FamilyInstance</strong> å¯¹è±¡è®¿é—®ï¼Œè€Œæ—ç±»å‹çš„å‚æ•°é€šè¿‡å®ä¾‹çš„ <strong>FamilyType</strong> ç±»å‹å¯¹è±¡è®¿é—®ã€‚</p>
<blockquote>
<p>åŒ…å«å…³ç³»ï¼š<strong>FamilyInstance -&gt; FamilyType -&gt; Family</strong></p>
</blockquote>
<p>æ¯ä¸ª<em>FamilyInstance</em>éƒ½æ˜¯é€šè¿‡<em>FamilyType</em>åˆ›å»ºã€‚åŒæ ·ï¼Œæ¯ä¸ª<em>FamilyType</em>å°†ç”±é¡¹ç›®æ–‡æ¡£ä¸­çš„åŠ è½½çš„<em>Family</em>æ—æ–‡ä»¶å®šä¹‰ã€‚</p>
<p>ä¸‹é¢æ¼”ç¤ºå¦‚ä½•ä»<em>FamilyInstance</em>å‘ä¸Šæ‰¾åˆ°<em>FamilyType</em>ç±»å‹ï¼Œå†é€šè¿‡<em>FamilyType</em>æ‰¾åˆ°<em>Family</em>æ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">family_instance = UnwrapElement(IN[<span class="number">0</span>])         <span class="comment"># å±•å¼€dynamoå›¾å…ƒå¾—åˆ°Revitæ—å®ä¾‹</span></span><br><span class="line">family_type_id = family_instance.GetTypeId()   <span class="comment"># è·å–æ—å®ä¾‹çš„ç±»å‹Id</span></span><br><span class="line">family_type = doc.GetElement(family_type_id)   <span class="comment"># é€šè¿‡ç±»å‹Idè·å–æ—ç±»å‹</span></span><br><span class="line">family = family_type.Family                    <span class="comment"># é€šè¿‡ç±»å‹è·å–æ—Family</span></span><br><span class="line">OUT = family_instance, family_type, family     <span class="comment"># è¾“å‡º [æ—å®ä¾‹, æ—ç±»å‹, æ—]</span></span><br></pre></td></tr></table></figure>
<p>åæ–¹å‘æŸ¥æ‰¾ï¼š<em>Family</em>å¯¹è±¡é€šå¸¸åŒ…å«å¤šä¸ªçš„<em>FamilyType</em>å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤šå¯¹ä¸€çš„å…³ç³»ã€‚åŒæ ·ï¼Œæœ‰è®¸å¤šæ”¾ç½®ç›¸åŒ<em>FamilyType</em>çš„<em>FamilyInstances</em>ã€‚è¦è·å¾—ä¸€ä¸ªå®¶åº­çš„æ‰€æœ‰ family_typeï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">family = UnwrapElement(IN[<span class="number">0</span>])                                    <span class="comment"># å±•å¼€dynamoå›¾å…ƒå¾—åˆ°Revitæ—</span></span><br><span class="line">family_type_ids = family.GetFamilySymbolIds()                    <span class="comment"># è·å–æ—åŒ…å«çš„æ‰€æœ‰ç±»å‹Id</span></span><br><span class="line">family_types = [doc.GetElement(<span class="built_in">id</span>) <span class="keyword">for</span> <span class="built_in">id</span> <span class="keyword">in</span> family_type_ids]    <span class="comment"># è·å–æ‰€æœ‰çš„æ—ç±»å‹å­˜å†åˆ—è¡¨ä¸­</span></span><br><span class="line">OUT = family_types                                               <span class="comment"># è¾“å‡ºæ—ç±»å‹åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>
<p>å¯»æ‰¾ç‰¹å®šç±»å‹çš„æ‰€æœ‰<em>FamilyInstance</em>å¯¹è±¡æ˜¯é‚£ä¹ˆç®€å•-æˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª <strong>FamilyInstanceFilter</strong> ä½¿ç”¨æ‰€éœ€<em>FamilyType</em>çš„ IDã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å±•å¼€dynamoå›¾å…ƒå¾—åˆ°Revitæ—</span></span><br><span class="line">family = UnwrapElement(IN[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># è·å–æ—åŒ…å«çš„æ‰€æœ‰ç±»å‹Id</span></span><br><span class="line">family_type_ids = family.GetFamilySymbolIds()</span><br><span class="line"><span class="comment"># åˆ›å»ºæ—å®ä¾‹åˆ—è¡¨</span></span><br><span class="line">family_instances = []</span><br><span class="line"><span class="comment"># å¯»æ‰¾ç±»å‹å¯¹åº”çš„å®ä¾‹</span></span><br><span class="line"><span class="keyword">for</span> family_type_id <span class="keyword">in</span> family_type_ids:</span><br><span class="line">    <span class="comment"># åˆ›å»ºæŒ‡å®šç±»å‹çš„è¿‡æ»¤å™¨</span></span><br><span class="line">    family_instance_filter = FamilyInstanceFilter(doc, family_type_id)</span><br><span class="line">    <span class="comment"># è·å–æ–‡æ¡£ä¸­æ‰€æœ‰ç±»å‹çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    elements = FilteredElementCollector(doc).WherePasses(family_instance_filter).ToElements()</span><br><span class="line">    <span class="comment"># å°†å®ä¾‹å¯¹è±¡æ·»åŠ åˆ°åˆ—è¡¨</span></span><br><span class="line">    family_instances.append(elements)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line">OUT = family_instances</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="æ—å®ä¾‹å’Œæ—ç±»å‹å‚æ•°"><a href="#æ—å®ä¾‹å’Œæ—ç±»å‹å‚æ•°" class="headerlink" title="æ—å®ä¾‹å’Œæ—ç±»å‹å‚æ•°"></a>æ—å®ä¾‹å’Œæ—ç±»å‹å‚æ•°</h2><h3 id="è·å–æ—å®ä¾‹å‚æ•°"><a href="#è·å–æ—å®ä¾‹å‚æ•°" class="headerlink" title="è·å–æ—å®ä¾‹å‚æ•°"></a>è·å–æ—å®ä¾‹å‚æ•°</h3><p>å¦‚æœè¦ä¸ä¼ é€’ Dynamo å…ƒç´ åˆ°èŠ‚ç‚¹ä¸­ä¸ Revit å…ƒç´ è¿›è¡Œäº¤äº’ï¼Œåˆ™éœ€è¦å°†å…¶å±•å¼€ã€‚å±•å¼€åï¼Œå¯ä»¥è®¿é—®ç‰¹å®šå‚æ•°å°†æ‰€æœ‰å…ƒç´ å®ä¾‹å‚æ•°çš„åˆ—è¡¨ä½œä¸º Parameter å¯¹è±¡è¿”å›ï¼Œå¯ä»¥é€šè¿‡å…¶ Element.Parameters å±æ€§è®¿é—®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">family_instance = UnwrapElement(IN[<span class="number">0</span>])            <span class="comment"># æ—å®ä¾‹å¯¹è±¡</span></span><br><span class="line">instance_parameters = family_instance.Parameters  <span class="comment"># å®ä¾‹åŒ…å«çš„æ‰€æœ‰å‚æ•°</span></span><br></pre></td></tr></table></figure>
<h3 id="è·å–æ—ç±»å‹å‚æ•°"><a href="#è·å–æ—ç±»å‹å‚æ•°" class="headerlink" title="è·å–æ—ç±»å‹å‚æ•°"></a>è·å–æ—ç±»å‹å‚æ•°</h3><p>ç±»å‹å‚æ•°éœ€è¦é€šè¿‡å…ƒç´ çš„æ—ç±»å‹æ¥è®¿é—®ã€‚å¦‚æœå°†<em>FamilyInstance</em>ä½œä¸ºè¾“å…¥ï¼Œåˆ™é¦–å…ˆéœ€è¦è·å–å…ƒç´ çš„ FamilyType å¯¹è±¡ï¼Œä¾‹å¦‚ <strong>GetTypeId()</strong> æ­¤æ–¹æ³•è¿”å›å…ƒç´ çš„æ—ç±»å‹çš„<em>ElementId</em>ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>doc.GetElement()</strong> æ–¹æ³•è¿”å›å…ƒç´ çš„<em>FamilyType</em>å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">family_instance = UnwrapElement(IN[<span class="number">0</span>])                      <span class="comment"># æ—å®ä¾‹å¯¹è±¡</span></span><br><span class="line">family_type = doc.GetElement(family_instance.GetTypeId())   <span class="comment"># é€šè¿‡å®ä¾‹è·å–ç±»å‹</span></span><br><span class="line">type_parameters = family_type.Parameters                    <span class="comment"># ç±»å‹åŒ…å«çš„æ‰€æœ‰å‚æ•°</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¿é—®æŒ‡å®šå‚æ•°"><a href="#è®¿é—®æŒ‡å®šå‚æ•°" class="headerlink" title="è®¿é—®æŒ‡å®šå‚æ•°"></a>è®¿é—®æŒ‡å®šå‚æ•°</h3><p>å¯¹äºè·å– FamilyInstance æˆ– FamilyType çš„å‚æ•°ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•æ¥è®¿é—®ç‰¹å®šå‚æ•°ï¼š</p>
<ul>
<li><strong>Element.LookupParameter()</strong></li>
<li><strong>Element.get_Parameter()</strong></li>
</ul>
<p>è¿™ä¸¤ç§æ–¹æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚å®ƒä»¬è¿”å›ä¸€ä¸ª <strong>Parameter</strong> å¯¹è±¡ã€‚é€‰æ‹© Revit é—¨å®ä¾‹å¯¹è±¡ï¼š</p>
<p><img src=".//2.7.parameter.png" alt="A simple example; reading the Mark value of an element."></p>
<h3 id="è·å–å‚æ•°å€¼"><a href="#è·å–å‚æ•°å€¼" class="headerlink" title="è·å–å‚æ•°å€¼"></a>è·å–å‚æ•°å€¼</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input_element = UnwrapElement(IN[<span class="number">0</span>])</span><br><span class="line">paratemer = input_element.LookupParameter(<span class="string">&quot;é¡¶é«˜åº¦&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¾“å‡ºåŸå§‹<em>Parameter</em>å¯¹è±¡ï¼Œå®ƒå°†æ˜¾ç¤ºä¸º<strong>Autodesk.Revit.DB.Parameter</strong>ï¼Œä¸ºäº†è·å–å‚æ•° <strong>Parameter</strong> å¯¹è±¡çš„å€¼ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ Parameter ç±»çš„å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚</p>
<p>ä¾æ®åˆ¤æ–­å€¼çš„ç±»å‹è¿›è¡Œå–å€¼å³å¯ï¼š</p>
<ul>
<li><strong>AsDouble()</strong></li>
<li><strong>AsElementId()</strong></li>
<li><strong>AsInteger()</strong></li>
<li><strong>AsString()</strong></li>
</ul>
<hr>
<ul>
<li><strong>AsValueString()</strong></li>
</ul>
<p>ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä»¥é€‚å½“çš„æ•°æ®ç±»å‹è¿”å›å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input_element = UnwrapElement(IN[<span class="number">0</span>])</span><br><span class="line">value = input_element.LookupParameter(<span class="string">&quot;é¡¶é«˜åº¦&quot;</span>).AsValueString() <span class="comment"># value = 2400</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å·¥ä½œæµç¨‹ç­‰æ•ˆäºåœ¨ Dynamo ä¸­ä½¿ç”¨ GetParameterValueByName èŠ‚ç‚¹ã€‚</p>
<h3 id="è®¾ç½®å‚æ•°å€¼"><a href="#è®¾ç½®å‚æ•°å€¼" class="headerlink" title="è®¾ç½®å‚æ•°å€¼"></a>è®¾ç½®å‚æ•°å€¼</h3><p>åŒæ ·éœ€è¦è·å–åˆ°<em>Parameter</em>å¯¹è±¡ï¼Œä½¿ç”¨ <strong>Set()</strong> æ–¹æ³•è¿›è¡Œèµ‹å€¼å³å¯,å½“ç„¶æ›´æ”¹å‚æ•°çš„è¿™ä¸ªæ“ä½œä¿®æ”¹äº†æ–‡ä»¶çš„å†…å®¹ï¼Œæ‰€ä»¥åº”è¯¥å¼€å¯ <strong>Transaction</strong> äº‹åŠ¡ã€‚</p>
<p><img src=".//2.7.parameterAsValueString.png" alt="AsValueString">ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">TransactionManager.Instance.EnsureInTransaction(doc) <span class="comment"># äº‹åŠ¡å¼€å§‹</span></span><br><span class="line">input_element = UnwrapElement(IN[<span class="number">0</span>])</span><br><span class="line">input_element.LookupParameter(<span class="string">&quot;é¡¶é«˜åº¦&quot;</span>).Set(<span class="number">2000</span>)</span><br><span class="line">TransactionManager.Instance.TransactionTaskDone()    <span class="comment"># äº‹åŠ¡ç»“æŸ</span></span><br></pre></td></tr></table></figure>
<p>Set å€¼å¯¹è±¡çš„ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Set(float)</strong></li>
<li><strong>Set(int)</strong></li>
<li><strong>Set(ElementId)</strong></li>
<li><strong>Set(str)</strong></li>
</ul>
<hr>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.8 å¤„ç†äº‹åŠ¡ Transactions</title>
    <url>/2021/02/09/PythonScriptPrimer/2.8%20%E5%A4%84%E7%90%86%E4%BA%8B%E5%8A%A1%20Transactions/</url>
    <content><![CDATA[<h2 id="Revit-æ˜¯æ•°æ®åº“"><a href="#Revit-æ˜¯æ•°æ®åº“" class="headerlink" title="Revit æ˜¯æ•°æ®åº“"></a>Revit æ˜¯æ•°æ®åº“</h2><p>éœ€è¦å¯¹è¯¥æ•°æ®åº“çš„æ›´æ”¹è¿›è¡Œä»”ç»†çš„æ’åºï¼Œéœ€è¦å¯¹è¿‡ç¨‹è¿›è¡Œç®¡ç†å’Œæ£€æŸ¥ï¼ˆé’ˆå¯¹æ¶æ„çš„æœ‰æ•ˆæ€§ä»¥åŠé’ˆå¯¹ Revit API è®¾è®¡çš„åˆæ³•æ€§ï¼‰ã€‚æ‰€æœ‰è¿™äº›éƒ½ç”± Revit çš„æœ¬æœº <strong>Transaction API</strong> å¤„ç†ã€‚</p>
<a id="more"></a>

<h2 id="Dynamoâ€™s-TransactionManager"><a href="#Dynamoâ€™s-TransactionManager" class="headerlink" title="Dynamoâ€™s TransactionManager"></a>Dynamoâ€™s TransactionManager</h2><p>å½“ç›´æ¥ä¸º Revit API ç¼–ç æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä»£ç å®ä¾‹åŒ– <strong>Transaction</strong> ç±»çš„æ–°å¯¹è±¡å¹¶è°ƒç”¨å…¶ <strong>Start()</strong> æ–¹æ³•æ¥ç®€å•åœ°å¯åŠ¨æ–°äº‹åŠ¡ã€‚ä½†æ˜¯ï¼Œåœ¨ Dynamo ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p>
<p><em>TransactionManager</em> æ˜¯ Dynamo API çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥ API å¤„ç† Dynamo åº”ç”¨ç¨‹åºä¸­å¯¹ Revit æ–‡æ¡£æ•°æ®åº“æ‰€åšçš„æ›´æ”¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">TransactionManager.Instance.EnsureInTransaction(doc)    <span class="comment"># ä¸º doc æ–‡æ¡£å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="comment"># å¢ã€åˆ ã€æ”¹æ“ä½œRevitæ–‡æ¡£</span></span><br><span class="line"></span><br><span class="line">TransactionManager.Instance.TransactionTaskDone()       <span class="comment"># æäº¤æ›´æ–°</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>ç®€è€Œè¨€ä¹‹ï¼Œä¸»ä½“ä»£ç éƒ½å†™åœ¨æ ·æ¿ä»£ç çš„è¿™ä¸¤è¡Œä»£ç ä¹‹é—´å³å¯ã€‚</strong></p>
</blockquote>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>2.9 æ‰¹å¤„ç†æ–‡æ¡£</title>
    <url>/2021/02/09/PythonScriptPrimer/2.9%20%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h2 id="å·¥ä½œæµ"><a href="#å·¥ä½œæµ" class="headerlink" title="å·¥ä½œæµ"></a>å·¥ä½œæµ</h2><p>æ‰¹å¤„ç† Revit æ–‡ä»¶ Revit API çš„æœ€å¼ºå¤§åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯èƒ½å¤Ÿä»¥è‡ªåŠ¨æ–¹å¼æ‰“å¼€ï¼Œå…³é—­ï¼Œç¼–è¾‘å’Œä¿å­˜æ–‡æ¡£ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥â€œæ— å¤´â€å®ç°è¿™ä¸€ç›®æ ‡ï¼Œè¿™æ„å‘³ç€æ— éœ€ä»»ä½• GUI ç»„ä»¶å³å¯æ‰“å¼€ Revit æ–‡æ¡£çš„æ•°æ®åº“ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä»¥è¿™ç§æ–¹å¼å¤„ç†æ–‡æ¡£å¯èƒ½æ¯”ç”¨æˆ·è¿™æ ·åšå¿« 20 åˆ° 30 å€-è¿™æ„å‘³ç€æ„å»ºæ¶‰åŠå¿«é€Ÿæ‰¹å¤„ç†è®¸å¤šæ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<a id="more"></a>

<ul>
<li><strong>æ‰¹å¤„ç†æ­¥éª¤</strong>ï¼š<ul>
<li>æ ¹æ®ç›®æ ‡æ–‡æ¡£çš„æ–‡ä»¶è·¯å¾„ï¼Œåˆ›å»º <strong>Revit FilePath</strong> å¯¹è±¡çš„åˆ—è¡¨ï¼Œéå†æ­¤æ–‡æ¡£è·¯å¾„åˆ—è¡¨</li>
<li>ä½¿ç”¨ Revit API çš„ <strong>Open()</strong> æ–¹æ³•æ‰“å¼€æ–‡ä»¶å¹¶ä¸ºæ­¤æ‰“å¼€çš„æ–‡æ¡£åˆ›å»ºä¸€ä¸ªå¥æŸ„</li>
<li>é€šè¿‡å…¶å¥æŸ„æ‰“å¼€é’ˆå¯¹æˆ‘ä»¬æ–°æ‰“å¼€çš„æ–‡æ¡£çš„å¤„ç†</li>
<li>æ ¹æ®éœ€æ±‚è¿›è¡Œ API è°ƒç”¨ï¼Œå…·ä½“å–å†³äºè¦æ‰§è¡Œçš„å…·ä½“æ“ä½œ</li>
<li>å…³é—­æ‰“å¼€æ–‡æ¡£ã€‚å¦‚æœéœ€è¦ä¿å­˜æ›´æ”¹ï¼Œå¯å°†æ–‡æ¡£è¿›è¡Œå¦å­˜ã€‚</li>
</ul>
</li>
</ul>
<h2 id="python-èŠ‚ç‚¹ä»£ç "><a href="#python-èŠ‚ç‚¹ä»£ç " class="headerlink" title="python èŠ‚ç‚¹ä»£ç "></a>python èŠ‚ç‚¹ä»£ç </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input_paths = IN[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># è®¾ç½®æ‰“å¼€æ–¹å¼</span></span><br><span class="line">open_options = OpenOptions()</span><br><span class="line">report = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> input_paths:</span><br><span class="line">    filepath = FilePath(path)</span><br><span class="line">    <span class="comment"># æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    family_doc = app.OpenDocumentFile(filepath, open_options)</span><br><span class="line">    dimensions = FilteredElementCollector(family_doc).OfCategory(BuiltInCategory.OST_Dimensions).WhereElementIsNotElementType().ToElements()</span><br><span class="line">    number_dimensions = <span class="built_in">len</span>(dimensions)</span><br><span class="line">    report.append(<span class="string">&quot;File &#123;&#125; contains &#123;&#125; dimensions&quot;</span>.<span class="built_in">format</span>(path, number_dimensions))</span><br><span class="line">    <span class="comment"># å…³é—­æ–‡ä»¶</span></span><br><span class="line">    family_doc.Close(<span class="literal">False</span>)</span><br><span class="line">OUT = report <span class="comment">#Outputting the report we generated</span></span><br></pre></td></tr></table></figure>
<h2 id="dynamo-èŠ‚ç‚¹"><a href="#dynamo-èŠ‚ç‚¹" class="headerlink" title="dynamo èŠ‚ç‚¹"></a>dynamo èŠ‚ç‚¹</h2><p><img src=".//2.9.files.jpg" alt="example"></p>
]]></content>
      <categories>
        <category>dynamo</category>
      </categories>
      <tags>
        <tag>dynamo</tag>
        <tag>python</tag>
      </tags>
  </entry>
</search>
